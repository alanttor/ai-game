<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML äº’åŠ¨é¡¹ç›®å±•ç¤º</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #fff;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf, #ff006e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #8892b0;
            font-size: 1.1em;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .project-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--card-color, #00d4ff), transparent);
        }

        .project-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: var(--card-color, #00d4ff);
        }

        .project-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }

        .project-desc {
            color: #8892b0;
            font-size: 0.95em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: rgba(0, 212, 255, 0.15);
            color: #00d4ff;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
        }

        /* æ·»åŠ é¡¹ç›®å¡ç‰‡ */
        .add-card {
            background: rgba(255, 255, 255, 0.03);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .add-card:hover {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.05);
        }

        .add-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .add-card .text {
            color: #8892b0;
            font-size: 1em;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: #1a1a2e;
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: #00d4ff;
            font-size: 1.3em;
        }

        .close-btn {
            background: none;
            border: none;
            color: #8892b0;
            font-size: 1.5em;
            cursor: pointer;
        }

        .close-btn:hover {
            color: #fff;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #8892b0;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-size: 1em;
            font-family: inherit;
        }

        .form-group textarea {
            min-height: 200px;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            color: #fff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #8892b0;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input-wrapper input[type="file"] {
            display: none;
        }

        .file-input-label {
            display: block;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            color: #8892b0;
            transition: all 0.3s;
        }

        .file-input-label:hover {
            border-color: #00d4ff;
            color: #00d4ff;
        }

        .user-projects-title {
            color: #ffd700;
            font-size: 0.9em;
            margin: 30px 0 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.2);
            border: none;
            color: #ff6b6b;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s;
        }

        .project-card:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: rgba(255, 0, 0, 0.4);
        }

        /* è‡ªå®šä¹‰å¯¹è¯æ¡† */
        .dialog-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .dialog-overlay.show {
            display: flex;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .dialog-box {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(0, 212, 255, 0.4);
            border-radius: 16px;
            padding: 30px;
            max-width: 420px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 212, 255, 0.1);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .dialog-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .dialog-title {
            font-size: 1.3em;
            color: #fff;
            margin-bottom: 10px;
        }

        .dialog-message {
            color: #8892b0;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .dialog-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .dialog-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s;
        }

        .dialog-btn-confirm {
            background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
            color: #fff;
        }

        .dialog-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
        }

        .dialog-btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            color: #8892b0;
        }

        .dialog-btn-cancel:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .dialog-btn-ok {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            color: #fff;
            min-width: 120px;
        }

        .dialog-btn-ok:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        /* Toast æç¤º */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(0, 212, 255, 0.4);
            border-radius: 12px;
            padding: 15px 30px;
            color: #fff;
            font-size: 1em;
            z-index: 3000;
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-color: rgba(56, 239, 125, 0.5);
        }

        .toast.error {
            border-color: rgba(255, 107, 107, 0.5);
        }

        .toast.warning {
            border-color: rgba(255, 215, 0, 0.5);
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #8892b0;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8em; }
            .projects-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¨ HTML äº’åŠ¨é¡¹ç›®å±•ç¤º</h1>
            <p class="subtitle">ç‚¹å‡»å¡ç‰‡è¿›å…¥å¯¹åº”é¡¹ç›® | çº¯å‰ç«¯å®ç°ï¼Œæ— éœ€æœåŠ¡å™¨</p>
        </header>
        <div class="projects-grid" id="projectsGrid"></div>
        <footer>
            <p>ğŸ’¡ ç‚¹å‡»"æ·»åŠ é¡¹ç›®"å¡ç‰‡å¯å¯¼å…¥è‡ªå®šä¹‰HTMLé¡¹ç›®</p>
        </footer>
    </div>

    <!-- æ·»åŠ é¡¹ç›®æ¨¡æ€æ¡† -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>â• æ·»åŠ æ–°é¡¹ç›®</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="form-group">
                <label>é¡¹ç›®åç§°</label>
                <input type="text" id="projectTitle" placeholder="ä¾‹å¦‚ï¼šæˆ‘çš„åŠ¨ç”»é¡¹ç›®">
            </div>
            <div class="form-group">
                <label>é¡¹ç›®ç®€ä»‹</label>
                <input type="text" id="projectDesc" placeholder="ä¸€å¥è¯æè¿°è¿™ä¸ªé¡¹ç›®">
            </div>
            <div class="form-group">
                <label>é¡¹ç›®å›¾æ ‡ (Emoji)</label>
                <input type="text" id="projectIcon" placeholder="ä¾‹å¦‚ï¼šğŸ®" maxlength="2">
            </div>
            <div class="form-group">
                <label>å¯¼å…¥HTMLæ–‡ä»¶</label>
                <div class="file-input-wrapper">
                    <input type="file" id="htmlFile" accept=".html,.htm">
                    <label class="file-input-label" for="htmlFile">ğŸ“ ç‚¹å‡»é€‰æ‹©HTMLæ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</label>
                </div>
            </div>
            <div class="form-group">
                <label>æˆ–ç›´æ¥ç²˜è´´HTMLä»£ç  <span style="color:#8892b0;font-size:0.85em">(å•ä¸ªé¡¹ç›®é™åˆ¶ 100KB)</span></label>
                <textarea id="htmlCode" placeholder="&lt;!DOCTYPE html&gt;&#10;&lt;html&gt;&#10;..." maxlength="102400"></textarea>
                <div style="text-align:right;color:#8892b0;font-size:0.8em;margin-top:5px;">
                    <span id="codeSize">0</span> / 100 KB
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" id="cancelBtn">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="saveBtn">ä¿å­˜é¡¹ç›®</button>
            </div>
        </div>
    </div>

    <!-- è‡ªå®šä¹‰ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="dialog-overlay" id="confirmDialog">
        <div class="dialog-box">
            <div class="dialog-icon" id="dialogIcon">âš ï¸</div>
            <div class="dialog-title" id="dialogTitle">ç¡®è®¤æ“ä½œ</div>
            <div class="dialog-message" id="dialogMessage">ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ</div>
            <div class="dialog-buttons">
                <button class="dialog-btn dialog-btn-cancel" id="dialogCancel">å–æ¶ˆ</button>
                <button class="dialog-btn dialog-btn-confirm" id="dialogConfirm">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- è‡ªå®šä¹‰æç¤ºå¯¹è¯æ¡† -->
    <div class="dialog-overlay" id="alertDialog">
        <div class="dialog-box">
            <div class="dialog-icon" id="alertIcon">âœ…</div>
            <div class="dialog-title" id="alertTitle">æç¤º</div>
            <div class="dialog-message" id="alertMessage">æ“ä½œæˆåŠŸï¼</div>
            <div class="dialog-buttons">
                <button class="dialog-btn dialog-btn-ok" id="alertOk">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- Toast æç¤º -->
    <div class="toast" id="toast">
        <span id="toastIcon">âœ…</span>
        <span id="toastMessage">æ“ä½œæˆåŠŸ</span>
    </div>

    <script>
        // ========== è‡ªå®šä¹‰å¯¹è¯æ¡†ç³»ç»Ÿ ==========
        const Dialog = {
            // ç¡®è®¤å¯¹è¯æ¡†
            confirm(options) {
                return new Promise((resolve) => {
                    const overlay = document.getElementById('confirmDialog');
                    document.getElementById('dialogIcon').textContent = options.icon || 'âš ï¸';
                    document.getElementById('dialogTitle').textContent = options.title || 'ç¡®è®¤æ“ä½œ';
                    document.getElementById('dialogMessage').textContent = options.message || 'ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ';
                    
                    const confirmBtn = document.getElementById('dialogConfirm');
                    const cancelBtn = document.getElementById('dialogCancel');
                    
                    confirmBtn.textContent = options.confirmText || 'ç¡®å®š';
                    cancelBtn.textContent = options.cancelText || 'å–æ¶ˆ';
                    
                    overlay.classList.add('show');
                    
                    const handleConfirm = () => {
                        overlay.classList.remove('show');
                        cleanup();
                        resolve(true);
                    };
                    
                    const handleCancel = () => {
                        overlay.classList.remove('show');
                        cleanup();
                        resolve(false);
                    };
                    
                    const handleOverlay = (e) => {
                        if (e.target === overlay) handleCancel();
                    };
                    
                    const cleanup = () => {
                        confirmBtn.removeEventListener('click', handleConfirm);
                        cancelBtn.removeEventListener('click', handleCancel);
                        overlay.removeEventListener('click', handleOverlay);
                    };
                    
                    confirmBtn.addEventListener('click', handleConfirm);
                    cancelBtn.addEventListener('click', handleCancel);
                    overlay.addEventListener('click', handleOverlay);
                });
            },
            
            // æç¤ºå¯¹è¯æ¡†
            alert(options) {
                return new Promise((resolve) => {
                    const overlay = document.getElementById('alertDialog');
                    document.getElementById('alertIcon').textContent = options.icon || 'âœ…';
                    document.getElementById('alertTitle').textContent = options.title || 'æç¤º';
                    document.getElementById('alertMessage').textContent = options.message || 'æ“ä½œå®Œæˆ';
                    
                    overlay.classList.add('show');
                    
                    const okBtn = document.getElementById('alertOk');
                    
                    const handleOk = () => {
                        overlay.classList.remove('show');
                        okBtn.removeEventListener('click', handleOk);
                        overlay.removeEventListener('click', handleOverlay);
                        resolve();
                    };
                    
                    const handleOverlay = (e) => {
                        if (e.target === overlay) handleOk();
                    };
                    
                    okBtn.addEventListener('click', handleOk);
                    overlay.addEventListener('click', handleOverlay);
                });
            },
            
            // Toast æç¤º
            toast(message, type = 'success', duration = 3000) {
                const toast = document.getElementById('toast');
                const icon = document.getElementById('toastIcon');
                const msg = document.getElementById('toastMessage');
                
                const icons = {
                    success: 'âœ…',
                    error: 'âŒ',
                    warning: 'âš ï¸',
                    info: 'â„¹ï¸'
                };
                
                icon.textContent = icons[type] || icons.success;
                msg.textContent = message;
                
                toast.className = 'toast ' + type;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, duration);
            }
        };

        // ========== å†…ç½®é¡¹ç›®é…ç½® ==========
        const builtInProjects = [
            {
                title: 'å…­è¾¹å½¢å¼¹è·³å°çƒ',
                file: 'hexagon-bouncing-ball.html',
                icon: 'â¬¡',
                color: '#00d4ff',
                desc: 'å°çƒåœ¨æ—‹è½¬çš„å…­è¾¹å½¢è¾¹ç•Œå†…å¼¹è·³ï¼Œå¯è°ƒèŠ‚é‡åŠ›ã€å¼¹æ€§ã€æ—‹è½¬é€Ÿåº¦ç­‰å‚æ•°',
                tags: ['ç‰©ç†æ¨¡æ‹Ÿ', 'Canvas', 'äº¤äº’']
            },
            {
                title: 'ç –å—çƒŸå›±çˆ†ç ´',
                file: 'chimney-demolition.html',
                icon: 'ğŸ’¥',
                color: '#ff6b6b',
                desc: '3Dç –å—çƒŸå›±çˆ†ç ´æ¨¡æ‹Ÿï¼Œæ”¯æŒè§†è§’æ—‹è½¬ã€ç‰©ç†ç¢°æ’å’Œé‡åŠ›æ•ˆæœ',
                tags: ['3Dæ¸²æŸ“', 'ç‰©ç†å¼•æ“', 'çˆ†ç ´']
            },
            {
                title: 'å¤ªé˜³ç³»æ¨¡æ‹Ÿå™¨',
                file: 'solar-system.html',
                icon: 'ğŸŒ',
                color: '#ffd700',
                desc: 'å…«å¤§è¡Œæ˜Ÿå›´ç»•å¤ªé˜³å…¬è½¬ï¼ŒæŒ‰çœŸå®æ¯”ä¾‹é€Ÿåº¦è¿è¡Œï¼Œå¯è°ƒèŠ‚æ—¶é—´å€é€Ÿ',
                tags: ['å¤©æ–‡', 'åŠ¨ç”»', 'æ•™è‚²']
            },
            {
                title: 'ç²’å­æ¼©æ¶¡',
                file: 'particle-vortex.html',
                icon: 'ğŸŒ€',
                color: '#ff00ff',
                desc: 'ç‚¹å‡»åˆ›å»ºé»‘æ´å¸å¼•ç²’å­ï¼Œæ¾å¼€åç²’å­å››æ•£ï¼Œå¸¦æœ‰ç»šä¸½æ‹–å°¾æ•ˆæœ',
                tags: ['ç²’å­ç³»ç»Ÿ', 'äº¤äº’', 'è§†è§‰']
            },
            {
                title: 'ä¼ä¸šå®˜ç½‘æ¨¡æ¿',
                file: 'corporate-website.html',
                icon: 'ğŸ¢',
                color: '#2563eb',
                desc: 'å“åº”å¼ä¼ä¸šå®˜ç½‘é¦–é¡µï¼ŒåŒ…å«å¯¼èˆªã€è½®æ’­å›¾ã€æœåŠ¡å±•ç¤ºã€å®¢æˆ·è¯„ä»·ç­‰æ¨¡å—',
                tags: ['å“åº”å¼', 'ç½‘ç«™æ¨¡æ¿', 'UI']
            },
            {
                title: 'åŠ¨ç”»å¤©æ°”å¡ç‰‡',
                file: 'weather-cards.html',
                icon: 'ğŸŒ¤ï¸',
                color: '#38ef7d',
                desc: 'å››ç§å¤©æ°”åŠ¨ç”»å¡ç‰‡ï¼šæ™´å¤©ã€é›¨å¤©ã€é›ªå¤©ã€å¤§é£ï¼Œæ”¯æŒç­›é€‰åˆ‡æ¢',
                tags: ['CSSåŠ¨ç”»', 'å¡ç‰‡', 'å¤©æ°”']
            },
            {
                title: 'æ‰“å­—ç»ƒä¹ æ¸¸æˆ',
                file: 'typing-game.html',
                icon: 'âŒ¨ï¸',
                color: '#667eea',
                desc: 'è‹±æ–‡æ‰“å­—ç»ƒä¹ ï¼Œå®æ—¶æ˜¾ç¤ºWPMã€å‡†ç¡®ç‡ï¼Œå¸¦è™šæ‹Ÿé”®ç›˜åé¦ˆ',
                tags: ['æ¸¸æˆ', 'é”®ç›˜', 'ç»ƒä¹ ']
            },
            {
                title: 'é‡å­æ³¢å‡½æ•°æ¨¡æ‹Ÿå™¨',
                file: 'quantum-simulator.html',
                icon: 'âš›ï¸',
                color: '#00ffff',
                desc: 'é‡å­åŠ›å­¦åŠ¿é˜±ä¸­çš„æ³¢å‡½æ•°å¯è§†åŒ–ï¼Œå¯è°ƒèŠ‚é‡å­æ•°ã€åŠ¿é˜±å‚æ•°ç­‰',
                tags: ['é‡å­ç‰©ç†', 'ç§‘å­¦', 'æ¨¡æ‹Ÿ']
            }
        ];

        // ========== GitHub é…ç½® ==========
        // Token åœ¨æ„å»ºæ—¶é€šè¿‡ GitHub Actions è‡ªåŠ¨æ³¨å…¥
        const GITHUB_CONFIG = {
            owner: 'alanttor',
            repo: 'ai-game',
            // æ•°æ®æ–‡ä»¶åœ¨ä»“åº“ä¸­çš„è·¯å¾„
            path: 'programmin- prompt-word-demo/data/projects.json',
            // %%GITHUB_TOKEN%% ä¼šåœ¨éƒ¨ç½²æ—¶è¢«æ›¿æ¢ä¸ºçœŸå® Token
            token: '%%GITHUB_TOKEN%%'
        };

        // æ˜¯å¦ä½¿ç”¨ GitHub å­˜å‚¨
        const USE_GITHUB_STORAGE = GITHUB_CONFIG.token !== '' && !GITHUB_CONFIG.token.includes('%%');

        // ========== å­˜å‚¨å±‚æŠ½è±¡ ==========
        const Storage = {
            fileSha: null,

            async getProjects() {
                if (!USE_GITHUB_STORAGE) {
                    const data = localStorage.getItem('userProjects');
                    return data ? JSON.parse(data) : [];
                }

                try {
                    const encodedPath = encodeURIComponent(GITHUB_CONFIG.path).replace(/%2F/g, '/');
                    const res = await fetch(
                        `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${encodedPath}`,
                        {
                            headers: {
                                'Authorization': `token ${GITHUB_CONFIG.token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    
                    if (!res.ok) {
                        if (res.status === 404) return [];
                        throw new Error('è·å–æ•°æ®å¤±è´¥');
                    }
                    
                    const data = await res.json();
                    this.fileSha = data.sha;
                    const content = decodeURIComponent(escape(atob(data.content)));
                    return JSON.parse(content);
                } catch (error) {
                    console.error('GitHub è¯»å–å¤±è´¥:', error);
                    Dialog.toast('äº‘ç«¯è¯»å–å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®', 'warning');
                    const data = localStorage.getItem('userProjects');
                    return data ? JSON.parse(data) : [];
                }
            },

            async saveProjects(projects) {
                // å§‹ç»ˆä¿å­˜åˆ°æœ¬åœ°ä½œä¸ºå¤‡ä»½
                localStorage.setItem('userProjects', JSON.stringify(projects));

                if (!USE_GITHUB_STORAGE) return true;

                try {
                    const content = btoa(unescape(encodeURIComponent(JSON.stringify(projects, null, 2))));
                    
                    const body = {
                        message: `æ›´æ–°é¡¹ç›®æ•°æ® - ${new Date().toLocaleString('zh-CN')}`,
                        content: content,
                        branch: 'master'
                    };
                    
                    if (this.fileSha) {
                        body.sha = this.fileSha;
                    }

                    const encodedPath = encodeURIComponent(GITHUB_CONFIG.path).replace(/%2F/g, '/');
                    const res = await fetch(
                        `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${encodedPath}`,
                        {
                            method: 'PUT',
                            headers: {
                                'Authorization': `token ${GITHUB_CONFIG.token}`,
                                'Accept': 'application/vnd.github.v3+json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(body)
                        }
                    );

                    if (!res.ok) throw new Error('ä¿å­˜å¤±è´¥');
                    
                    const data = await res.json();
                    this.fileSha = data.content.sha;
                    return true;
                } catch (error) {
                    console.error('GitHub ä¿å­˜å¤±è´¥:', error);
                    Dialog.toast('äº‘ç«¯ä¿å­˜å¤±è´¥ï¼Œå·²ä¿å­˜åˆ°æœ¬åœ°', 'warning');
                    return false;
                }
            }
        };

        // ========== ç”¨æˆ·é¡¹ç›®ç®¡ç† ==========
        let userProjectsCache = [];

        async function loadUserProjects() {
            userProjectsCache = await Storage.getProjects();
            return userProjectsCache;
        }

        function getUserProjects() {
            return userProjectsCache;
        }

        async function saveUserProjects(projects) {
            userProjectsCache = projects;
            await Storage.saveProjects(projects);
        }

        async function addUserProject(project) {
            const projects = getUserProjects();
            project.id = Date.now();
            project.createdAt = new Date().toISOString();
            projects.push(project);
            await saveUserProjects(projects);
            renderProjects();
        }

        async function deleteUserProject(id) {
            const projects = getUserProjects().filter(p => p.id !== id);
            await saveUserProjects(projects);
            renderProjects();
        }

        // ========== æ¸²æŸ“é¡¹ç›® ==========
        async function renderProjects() {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;color:#8892b0;">åŠ è½½ä¸­...</div>';

            // é¦–æ¬¡åŠ è½½æ—¶ä»å­˜å‚¨è·å–
            if (userProjectsCache.length === 0) {
                await loadUserProjects();
            }

            grid.innerHTML = '';

            // æ¸²æŸ“å†…ç½®é¡¹ç›®
            builtInProjects.forEach(project => {
                const card = createProjectCard(project, false);
                grid.appendChild(card);
            });

            // æ¸²æŸ“ç”¨æˆ·é¡¹ç›®
            const userProjects = getUserProjects();
            if (userProjects.length > 0) {
                const divider = document.createElement('div');
                divider.className = 'user-projects-title';
                divider.style.gridColumn = '1 / -1';
                divider.textContent = `ğŸ“¦ ç¤¾åŒºé¡¹ç›® (${userProjects.length})`;
                grid.appendChild(divider);

                userProjects.forEach(project => {
                    const card = createProjectCard(project, true);
                    grid.appendChild(card);
                });
            }

            // æ·»åŠ "æ·»åŠ é¡¹ç›®"å¡ç‰‡
            const addCard = document.createElement('div');
            addCard.className = 'add-card';
            addCard.innerHTML = `
                <div class="icon">â•</div>
                <div class="text">æ·»åŠ æ–°é¡¹ç›®</div>
            `;
            addCard.addEventListener('click', () => {
                document.getElementById('addModal').classList.add('show');
            });
            grid.appendChild(addCard);
        }

        function createProjectCard(project, isUserProject) {
            const card = document.createElement('div');
            card.className = 'project-card';
            card.style.setProperty('--card-color', project.color || '#00d4ff');
            
            let deleteBtn = '';
            if (isUserProject) {
                deleteBtn = `<button class="delete-btn" data-id="${project.id}">Ã—</button>`;
            }

            card.innerHTML = `
                ${deleteBtn}
                <div class="project-icon">${project.icon}</div>
                <div class="project-title">${project.title}</div>
                <div class="project-desc">${project.desc}</div>
                <div class="project-tags">
                    ${(project.tags || ['è‡ªå®šä¹‰']).map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
            `;

            // ç‚¹å‡»å¡ç‰‡æ‰“å¼€é¡¹ç›®
            card.addEventListener('click', (e) => {
                if (e.target.classList.contains('delete-btn')) return;
                
                if (isUserProject) {
                    // ç”¨æˆ·é¡¹ç›®ï¼šä»é¡¹ç›®æ•°æ®ä¸­è¯»å–HTMLå¹¶åœ¨æ–°çª—å£æ‰“å¼€
                    const htmlContent = project.htmlContent;
                    if (htmlContent) {
                        const blob = new Blob([htmlContent], { type: 'text/html' });
                        const url = URL.createObjectURL(blob);
                        window.open(url, '_blank');
                    } else {
                        Dialog.toast('è¯¥é¡¹ç›®æ²¡æœ‰HTMLå†…å®¹', 'error');
                    }
                } else {
                    // å†…ç½®é¡¹ç›®ï¼šç›´æ¥è·³è½¬
                    window.location.href = project.file;
                }
            });

            // åˆ é™¤æŒ‰é’®
            if (isUserProject) {
                card.querySelector('.delete-btn').addEventListener('click', async (e) => {
                    e.stopPropagation();
                    const confirmed = await Dialog.confirm({
                        icon: 'ğŸ—‘ï¸',
                        title: 'åˆ é™¤é¡¹ç›®',
                        message: `ç¡®å®šè¦åˆ é™¤ã€Œ${project.title}ã€å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,
                        confirmText: 'åˆ é™¤',
                        cancelText: 'å–æ¶ˆ'
                    });
                    if (confirmed) {
                        deleteUserProject(project.id);
                        Dialog.toast('é¡¹ç›®å·²åˆ é™¤', 'success');
                    }
                });
            }

            return card;
        }

        // ========== æ¨¡æ€æ¡†é€»è¾‘ ==========
        const modal = document.getElementById('addModal');
        const closeModal = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const saveBtn = document.getElementById('saveBtn');
        const htmlFile = document.getElementById('htmlFile');
        const htmlCode = document.getElementById('htmlCode');
        const fileLabel = document.querySelector('.file-input-label');

        closeModal.addEventListener('click', () => modal.classList.remove('show'));
        cancelBtn.addEventListener('click', () => modal.classList.remove('show'));
        modal.addEventListener('click', (e) => {
            if (e.target === modal) modal.classList.remove('show');
        });

        // æ–‡ä»¶é€‰æ‹©
        htmlFile.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 100 * 1024) {
                    Dialog.alert({
                        icon: 'âš ï¸',
                        title: 'æ–‡ä»¶è¿‡å¤§',
                        message: `æ–‡ä»¶å¤§å° ${(file.size/1024).toFixed(1)}KB è¶…è¿‡é™åˆ¶ï¼ˆ100KBï¼‰ï¼Œè¯·å‹ç¼©åé‡è¯•`
                    });
                    return;
                }
                fileLabel.textContent = `âœ… å·²é€‰æ‹©: ${file.name} (${(file.size/1024).toFixed(1)}KB)`;
                const reader = new FileReader();
                reader.onload = (e) => {
                    htmlCode.value = e.target.result;
                    updateCodeSize();
                };
                reader.readAsText(file);
            }
        });

        // æ›´æ–°ä»£ç å¤§å°æ˜¾ç¤º
        function updateCodeSize() {
            const size = new Blob([htmlCode.value]).size;
            const sizeKB = (size / 1024).toFixed(1);
            document.getElementById('codeSize').textContent = sizeKB;
            document.getElementById('codeSize').style.color = size > 100 * 1024 ? '#ff6b6b' : '#8892b0';
        }

        htmlCode.addEventListener('input', updateCodeSize);

        // æ‹–æ‹½ä¸Šä¼ 
        fileLabel.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileLabel.style.borderColor = '#00d4ff';
        });

        fileLabel.addEventListener('dragleave', () => {
            fileLabel.style.borderColor = '';
        });

        fileLabel.addEventListener('drop', (e) => {
            e.preventDefault();
            fileLabel.style.borderColor = '';
            const file = e.dataTransfer.files[0];
            if (file && (file.name.endsWith('.html') || file.name.endsWith('.htm'))) {
                fileLabel.textContent = `âœ… å·²é€‰æ‹©: ${file.name}`;
                const reader = new FileReader();
                reader.onload = (e) => {
                    htmlCode.value = e.target.result;
                };
                reader.readAsText(file);
            }
        });

        // ä¿å­˜é¡¹ç›®
        saveBtn.addEventListener('click', async () => {
            const title = document.getElementById('projectTitle').value.trim();
            const desc = document.getElementById('projectDesc').value.trim();
            const icon = document.getElementById('projectIcon').value.trim() || 'ğŸ“„';
            const code = htmlCode.value.trim();

            if (!title) {
                await Dialog.alert({
                    icon: 'âš ï¸',
                    title: 'ç¼ºå°‘ä¿¡æ¯',
                    message: 'è¯·è¾“å…¥é¡¹ç›®åç§°'
                });
                return;
            }
            if (!code) {
                await Dialog.alert({
                    icon: 'âš ï¸',
                    title: 'ç¼ºå°‘å†…å®¹',
                    message: 'è¯·å¯¼å…¥HTMLæ–‡ä»¶æˆ–ç²˜è´´HTMLä»£ç '
                });
                return;
            }

            // æ£€æŸ¥æ–‡ä»¶å¤§å°
            const codeSize = new Blob([code]).size;
            if (codeSize > 100 * 1024) {
                await Dialog.alert({
                    icon: 'âš ï¸',
                    title: 'å†…å®¹è¿‡å¤§',
                    message: `HTMLå†…å®¹ ${(codeSize/1024).toFixed(1)}KB è¶…è¿‡é™åˆ¶ï¼ˆ100KBï¼‰ï¼Œè¯·ç²¾ç®€ä»£ç åé‡è¯•`
                });
                return;
            }

            // éªŒè¯HTMLä»£ç 
            if (!code.includes('<html') && !code.includes('<body') && !code.includes('<div')) {
                const confirmed = await Dialog.confirm({
                    icon: 'ğŸ¤”',
                    title: 'HTMLæ ¼å¼æ£€æŸ¥',
                    message: 'ä»£ç ä¼¼ä¹ä¸æ˜¯å®Œæ•´çš„HTMLï¼Œç¡®å®šè¦ç»§ç»­ä¿å­˜å—ï¼Ÿ',
                    confirmText: 'ç»§ç»­ä¿å­˜',
                    cancelText: 'è¿”å›ä¿®æ”¹'
                });
                if (!confirmed) return;
            }

            // å°†HTMLå†…å®¹ä¹Ÿå­˜å…¥é¡¹ç›®æ•°æ®ä¸­ï¼ˆè¿™æ ·æ‰€æœ‰äººéƒ½èƒ½è®¿é—®ï¼‰
            const project = {
                title,
                desc: desc || 'ç”¨æˆ·è‡ªå®šä¹‰é¡¹ç›®',
                icon,
                color: '#ffd700',
                tags: ['è‡ªå®šä¹‰'],
                htmlContent: code  // HTMLå†…å®¹å­˜åˆ°GitHub
            };

            await addUserProject(project);

            // é‡ç½®è¡¨å•
            document.getElementById('projectTitle').value = '';
            document.getElementById('projectDesc').value = '';
            document.getElementById('projectIcon').value = '';
            htmlCode.value = '';
            fileLabel.textContent = 'ğŸ“ ç‚¹å‡»é€‰æ‹©HTMLæ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„';
            
            modal.classList.remove('show');
            
            await Dialog.alert({
                icon: 'ğŸ‰',
                title: 'æ·»åŠ æˆåŠŸ',
                message: `é¡¹ç›®ã€Œ${title}ã€å·²æˆåŠŸæ·»åŠ ï¼`
            });
        });

        // åˆå§‹åŒ–
        renderProjects();
    </script>
</body>
</html>