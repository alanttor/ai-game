<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯†ç å­¦å†å²å†’é™©</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1510 0%, #0a0805 100%);
            min-height: 100vh;
            color: #d4c4a8;
            overflow: hidden;
        }
        .container { display: flex; flex-direction: column; height: 100vh; }
        .timeline {
            height: 60px;
            background: rgba(20,15,10,0.95);
            border-bottom: 2px solid #8b7355;
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 10px;
            overflow-x: auto;
        }
        .main-area { flex: 1; display: flex; }
        .cipher-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        .tools-panel {
            width: 300px;
            background: rgba(20,15,10,0.95);
            border-left: 2px solid #8b7355;
            padding: 15px;
            overflow-y: auto;
        }
</style>
</head>
<body>
<div class="container">
    <div class="timeline" id="timeline"></div>
    <div class="main-area">
        <div class="cipher-area" id="cipherArea"></div>
        <div class="tools-panel" id="toolsPanel"></div>
    </div>
</div>
<script>
// æ¸¸æˆçŠ¶æ€
let currentEra = 0;
let currentLevel = 0;
let score = 0;
let decryptedCount = 0;

const eras = [
    { name: 'å¤å…¸æ—¶ä»£', year: 'å‰50å¹´', color: '#c9a227', icon: 'ğŸ›ï¸' },
    { name: 'æ–‡è‰ºå¤å…´', year: '1500å¹´', color: '#8b4513', icon: 'ğŸ“œ' },
    { name: 'æœºæ¢°æ—¶ä»£', year: '1940å¹´', color: '#4a5568', icon: 'âš™ï¸' },
    { name: 'è®¡ç®—æœºé»æ˜', year: '1970å¹´', color: '#2d3748', icon: 'ğŸ’¾' },
    { name: 'ç°ä»£å¯†ç å­¦', year: '2000å¹´', color: '#1a365d', icon: 'ğŸ”' }
];

const levels = [
    // å¤å…¸æ—¶ä»£
    {
        era: 0, title: 'å‡¯æ’’çš„ç§˜å¯†', cipher: 'caesar', shift: 3,
        plaintext: 'ATTACK AT DAWN',
        story: 'å…¬å…ƒå‰50å¹´ï¼Œå‡¯æ’’å¤§å¸éœ€è¦å‘ä»–çš„å°†å†›ä¼ é€’ç§˜å¯†å†›ä»¤...',
        hint: 'æ¯ä¸ªå­—æ¯å‘åç§»åŠ¨å›ºå®šä½æ•°'
    },
    {
        era: 0, title: 'æ›¿æ¢å¯†ç ', cipher: 'substitution',
        plaintext: 'SECRET MESSAGE',
        story: 'å¤ç½—é©¬é—´è°ä½¿ç”¨å­—æ¯æ›¿æ¢æ¥éšè—ä¿¡æ¯...',
        hint: 'åˆ†æå­—æ¯é¢‘ç‡ï¼ŒEæ˜¯è‹±è¯­ä¸­æœ€å¸¸è§çš„å­—æ¯'
    },
    {
        era: 0, title: 'Atbashå¯†ç ', cipher: 'atbash',
        plaintext: 'HELLO WORLD',
        story: 'å¸Œä¼¯æ¥äººä½¿ç”¨çš„å¤è€å¯†ç ï¼ŒAå˜Zï¼ŒBå˜Y...',
        hint: 'å­—æ¯è¡¨åè½¬ï¼šAâ†”Z, Bâ†”Y, Câ†”X...'
    },
    // æ–‡è‰ºå¤å…´
    {
        era: 1, title: 'ç»´å‰å°¼äºšå¯†ç ', cipher: 'vigenere', key: 'KEY',
        plaintext: 'CRYPTOGRAPHY',
        story: '16ä¸–çºªï¼Œç»´å‰å°¼äºšå‘æ˜äº†å¤šè¡¨æ›¿æ¢å¯†ç ...',
        hint: 'ä½¿ç”¨å…³é”®è¯å¾ªç¯åŠ å¯†ï¼Œå°è¯•æ‰¾å‡ºå¯†é’¥é•¿åº¦'
    },
    {
        era: 1, title: 'ç›ä¸½å¥³ç‹çš„ä¿¡', cipher: 'vigenere', key: 'MARY',
        plaintext: 'EXECUTE THE PLAN',
        story: '1586å¹´ï¼Œç›ä¸½å¥³ç‹çš„ç§˜å¯†é€šä¿¡è¢«æˆªè·...',
        hint: 'å¯†é’¥å¯èƒ½ä¸äººåæœ‰å…³'
    },
    // æœºæ¢°æ—¶ä»£
    {
        era: 2, title: 'æ©å°¼æ ¼ç›åˆæ¢', cipher: 'enigma',
        plaintext: 'WEATHER REPORT',
        story: '1940å¹´ï¼Œå¸ƒè±åˆ‡åˆ©å›­çš„å¯†ç ç ´è¯‘å‘˜é¢å¯¹æ©å°¼æ ¼ç›æœº...',
        hint: 'æ©å°¼æ ¼ç›çš„ç‰¹ç‚¹ï¼šå­—æ¯ä¸ä¼šåŠ å¯†æˆè‡ªå·±'
    },
    // è®¡ç®—æœºæ—¶ä»£
    {
        era: 3, title: 'XORåŠ å¯†', cipher: 'xor', key: 42,
        plaintext: 'DIGITAL AGE',
        story: 'è®¡ç®—æœºæ—¶ä»£ï¼Œå¼‚æˆ–è¿ç®—æˆä¸ºåŠ å¯†åŸºç¡€...',
        hint: 'XORçš„ç‰¹æ€§ï¼šAâŠ•KâŠ•K = A'
    },
    // ç°ä»£å¯†ç å­¦
    {
        era: 4, title: 'RSAåŸç†', cipher: 'rsa',
        plaintext: 'PUBLIC KEY',
        story: '1977å¹´ï¼ŒRSAç®—æ³•å¼€åˆ›äº†å…¬é’¥å¯†ç å­¦æ—¶ä»£...',
        hint: 'åŸºäºå¤§æ•°åˆ†è§£çš„å›°éš¾æ€§'
    }
];

// å¯†ç ç®—æ³•å®ç°
const ciphers = {
    caesar: {
        encrypt: (text, shift) => {
            return text.split('').map(c => {
                if (c >= 'A' && c <= 'Z') {
                    return String.fromCharCode((c.charCodeAt(0) - 65 + shift) % 26 + 65);
                }
                return c;
            }).join('');
        },
        decrypt: (text, shift) => {
            return ciphers.caesar.encrypt(text, 26 - shift);
        }
    },
    atbash: {
        encrypt: (text) => {
            return text.split('').map(c => {
                if (c >= 'A' && c <= 'Z') {
                    return String.fromCharCode(90 - (c.charCodeAt(0) - 65));
                }
                return c;
            }).join('');
        },
        decrypt: (text) => ciphers.atbash.encrypt(text)
    },
    vigenere: {
        encrypt: (text, key) => {
            let result = '';
            let j = 0;
            for (let c of text) {
                if (c >= 'A' && c <= 'Z') {
                    const shift = key.charCodeAt(j % key.length) - 65;
                    result += String.fromCharCode((c.charCodeAt(0) - 65 + shift) % 26 + 65);
                    j++;
                } else {
                    result += c;
                }
            }
            return result;
        },
        decrypt: (text, key) => {
            let result = '';
            let j = 0;
            for (let c of text) {
                if (c >= 'A' && c <= 'Z') {
                    const shift = key.charCodeAt(j % key.length) - 65;
                    result += String.fromCharCode((c.charCodeAt(0) - 65 - shift + 26) % 26 + 65);
                    j++;
                } else {
                    result += c;
                }
            }
            return result;
        }
    },
    xor: {
        encrypt: (text, key) => {
            return text.split('').map(c => {
                if (c >= 'A' && c <= 'Z') {
                    return String.fromCharCode(((c.charCodeAt(0) - 65) ^ key) % 26 + 65);
                }
                return c;
            }).join('');
        },
        decrypt: (text, key) => ciphers.xor.encrypt(text, key)
    }
};

function init() {
    renderTimeline();
    loadLevel(currentLevel);
    renderToolsPanel();
}

function renderTimeline() {
    const timeline = document.getElementById('timeline');
    timeline.innerHTML = `
        <style>
            .era-btn { padding: 8px 16px; background: rgba(139,115,85,0.3); border: 1px solid #8b7355; border-radius: 20px; color: #d4c4a8; cursor: pointer; font-size: 0.8em; white-space: nowrap; transition: all 0.3s; }
            .era-btn:hover { background: rgba(139,115,85,0.5); }
            .era-btn.active { background: #8b7355; color: #1a1510; }
            .era-btn.locked { opacity: 0.5; cursor: not-allowed; }
        </style>
        <span style="color:#8b7355;margin-right:10px;">ğŸ“… æ—¶ä»£:</span>
        ${eras.map((era, i) => `
            <button class="era-btn ${i === currentEra ? 'active' : ''} ${i > decryptedCount ? 'locked' : ''}" 
                    onclick="${i <= decryptedCount ? `jumpToEra(${i})` : ''}">
                ${era.icon} ${era.name} (${era.year})
            </button>
        `).join('')}
        <div style="flex:1"></div>
        <span style="color:#c9a227">ğŸ† å¾—åˆ†: ${score}</span>
    `;
}

function loadLevel(index) {
    if (index >= levels.length) {
        showVictory();
        return;
    }
    
    currentLevel = index;
    const level = levels[index];
    currentEra = level.era;
    
    // ç”Ÿæˆå¯†æ–‡
    let ciphertext;
    if (level.cipher === 'caesar') {
        ciphertext = ciphers.caesar.encrypt(level.plaintext, level.shift);
    } else if (level.cipher === 'atbash') {
        ciphertext = ciphers.atbash.encrypt(level.plaintext);
    } else if (level.cipher === 'vigenere') {
        ciphertext = ciphers.vigenere.encrypt(level.plaintext, level.key);
    } else if (level.cipher === 'xor') {
        ciphertext = ciphers.xor.encrypt(level.plaintext, level.key);
    } else {
        ciphertext = level.plaintext; // ç®€åŒ–å¤„ç†
    }
    
    renderCipherArea(level, ciphertext);
    renderTimeline();
    renderToolsPanel();
}

function renderCipherArea(level, ciphertext) {
    const area = document.getElementById('cipherArea');
    const era = eras[level.era];
    
    area.innerHTML = `
        <style>
            .level-header { margin-bottom: 20px; }
            .era-badge { display: inline-block; padding: 5px 15px; background: ${era.color}33; border: 1px solid ${era.color}; border-radius: 20px; color: ${era.color}; font-size: 0.85em; margin-bottom: 10px; }
            .level-title { font-size: 1.8em; color: #d4c4a8; margin-bottom: 10px; }
            .story-box { background: rgba(139,115,85,0.1); border-left: 3px solid #8b7355; padding: 15px; margin-bottom: 20px; font-style: italic; color: #a89878; line-height: 1.6; }
            .cipher-box { background: rgba(0,0,0,0.3); border: 2px solid #8b7355; border-radius: 8px; padding: 20px; margin-bottom: 20px; }
            .cipher-label { color: #8b7355; font-size: 0.85em; margin-bottom: 10px; }
            .cipher-text { font-family: 'Courier New', monospace; font-size: 1.5em; color: #ff6b6b; letter-spacing: 3px; word-break: break-all; }
            .decrypt-box { margin-top: 20px; }
            .decrypt-input { width: 100%; padding: 15px; background: rgba(0,0,0,0.5); border: 2px solid #4a3a28; border-radius: 8px; color: #00ff88; font-family: 'Courier New', monospace; font-size: 1.3em; letter-spacing: 2px; text-transform: uppercase; }
            .decrypt-input:focus { outline: none; border-color: #8b7355; }
            .submit-btn { margin-top: 15px; padding: 12px 30px; background: linear-gradient(135deg, #8b7355, #6b5335); border: none; border-radius: 8px; color: #fff; font-size: 1em; cursor: pointer; }
            .submit-btn:hover { transform: scale(1.02); }
            .hint-btn { margin-left: 10px; padding: 12px 20px; background: rgba(201,162,39,0.2); border: 1px solid #c9a227; border-radius: 8px; color: #c9a227; cursor: pointer; }
            .result-box { margin-top: 15px; padding: 15px; border-radius: 8px; display: none; }
            .result-success { background: rgba(0,255,136,0.1); border: 1px solid #00ff88; color: #00ff88; }
            .result-error { background: rgba(255,107,107,0.1); border: 1px solid #ff6b6b; color: #ff6b6b; }
            .freq-chart { display: flex; align-items: flex-end; height: 100px; gap: 2px; margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px; }
            .freq-bar { width: 12px; background: #8b7355; border-radius: 2px 2px 0 0; transition: height 0.3s; }
        </style>
        
        <div class="level-header">
            <div class="era-badge">${era.icon} ${era.name} - ${era.year}</div>
            <div class="level-title">ğŸ” ${level.title}</div>
        </div>
        
        <div class="story-box">
            ğŸ“– ${level.story}
        </div>
        
        <div class="cipher-box">
            <div class="cipher-label">ğŸ”’ å¯†æ–‡ (Ciphertext)</div>
            <div class="cipher-text" id="cipherText">${ciphertext}</div>
            
            <div style="margin-top:15px;">
                <div class="cipher-label">ğŸ“Š å­—æ¯é¢‘ç‡åˆ†æ</div>
                <div class="freq-chart" id="freqChart"></div>
            </div>
        </div>
        
        <div class="decrypt-box">
            <div class="cipher-label">ğŸ”“ è¾“å…¥æ˜æ–‡ (Plaintext)</div>
            <input type="text" class="decrypt-input" id="decryptInput" placeholder="è¾“å…¥ä½ ç ´è¯‘çš„æ˜æ–‡..." autocomplete="off">
            <div style="margin-top:15px;">
                <button class="submit-btn" onclick="checkAnswer()">âœ“ æäº¤ç­”æ¡ˆ</button>
                <button class="hint-btn" onclick="showHint()">ğŸ’¡ æç¤º</button>
            </div>
            <div class="result-box" id="resultBox"></div>
        </div>
    `;
    
    // è®¡ç®—é¢‘ç‡
    updateFrequencyChart(ciphertext);
    
    // è¾“å…¥ç›‘å¬
    document.getElementById('decryptInput').addEventListener('keypress', e => {
        if (e.key === 'Enter') checkAnswer();
    });
}

function updateFrequencyChart(text) {
    const freq = {};
    for (let c of text.toUpperCase()) {
        if (c >= 'A' && c <= 'Z') {
            freq[c] = (freq[c] || 0) + 1;
        }
    }
    
    const maxFreq = Math.max(...Object.values(freq), 1);
    const chart = document.getElementById('freqChart');
    if (!chart) return;
    
    chart.innerHTML = '';
    for (let i = 0; i < 26; i++) {
        const letter = String.fromCharCode(65 + i);
        const count = freq[letter] || 0;
        const height = (count / maxFreq) * 80;
        
        const bar = document.createElement('div');
        bar.className = 'freq-bar';
        bar.style.height = height + 'px';
        bar.title = `${letter}: ${count}`;
        chart.appendChild(bar);
    }
}

function renderToolsPanel() {
    const panel = document.getElementById('toolsPanel');
    const level = levels[currentLevel];
    
    panel.innerHTML = `
        <style>
            .panel-title { font-size: 1em; color: #c9a227; border-bottom: 1px solid #8b7355; padding-bottom: 8px; margin-bottom: 12px; }
            .panel-section { background: rgba(255,255,255,0.03); border-radius: 6px; padding: 12px; margin-bottom: 12px; border: 1px solid #4a3a28; }
            .tool-row { margin: 10px 0; }
            .tool-label { font-size: 0.8em; color: #8b7355; margin-bottom: 5px; }
            input[type="range"] { width: 100%; }
            input[type="text"].tool-input { width: 100%; padding: 8px; background: rgba(0,0,0,0.3); border: 1px solid #4a3a28; border-radius: 4px; color: #d4c4a8; }
            .tool-btn { width: 100%; padding: 8px; background: rgba(139,115,85,0.3); border: 1px solid #8b7355; border-radius: 4px; color: #d4c4a8; cursor: pointer; margin: 5px 0; }
            .tool-btn:hover { background: rgba(139,115,85,0.5); }
            .tool-output { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-family: monospace; color: #00ff88; font-size: 0.9em; word-break: break-all; margin-top: 10px; min-height: 40px; }
        </style>
        
        <div class="panel-section">
            <div class="panel-title">ğŸ”§ è§£å¯†å·¥å…·</div>
            
            <div class="tool-row">
                <div class="tool-label">å‡¯æ’’ä½ç§» (0-25)</div>
                <input type="range" min="0" max="25" value="0" id="caesarShift" oninput="tryCaesar()">
                <div style="text-align:center;color:#c9a227" id="shiftValue">0</div>
            </div>
            
            <div class="tool-row">
                <div class="tool-label">ç»´å‰å°¼äºšå¯†é’¥</div>
                <input type="text" class="tool-input" id="vigenereKey" placeholder="è¾“å…¥å¯†é’¥..." oninput="tryVigenere()">
            </div>
            
            <button class="tool-btn" onclick="tryAtbash()">å°è¯• Atbash</button>
            
            <div class="tool-output" id="toolOutput">è§£å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
        </div>
        
        <div class="panel-section">
            <div class="panel-title">ğŸ“š å¯†ç çŸ¥è¯†</div>
            <div style="font-size:0.8em;color:#a89878;line-height:1.6;">
                <b style="color:#c9a227">${level.cipher.toUpperCase()}</b><br>
                ${getCipherInfo(level.cipher)}
            </div>
        </div>
        
        <div class="panel-section">
            <div class="panel-title">ğŸ’¡ æç¤º</div>
            <div style="font-size:0.85em;color:#a89878;" id="hintText">
                ç‚¹å‡»"æç¤º"æŒ‰é’®è·å–å¸®åŠ©
            </div>
        </div>
        
        <div class="panel-section">
            <div class="panel-title">ğŸ“Š è¿›åº¦</div>
            <div style="font-size:0.85em;color:#a89878;">
                å…³å¡: ${currentLevel + 1} / ${levels.length}<br>
                å·²ç ´è¯‘: ${decryptedCount}<br>
                å¾—åˆ†: ${score}
            </div>
        </div>
    `;
}

function getCipherInfo(cipher) {
    const info = {
        caesar: 'å‡¯æ’’å¯†ç æ˜¯æœ€ç®€å•çš„æ›¿æ¢å¯†ç ï¼Œæ¯ä¸ªå­—æ¯æŒ‰å›ºå®šä½æ•°ç§»åŠ¨ã€‚ä¾‹å¦‚ä½ç§»3æ—¶ï¼ŒAâ†’D, Bâ†’Eã€‚',
        atbash: 'Atbashæ˜¯å¸Œä¼¯æ¥å¯†ç ï¼Œå­—æ¯è¡¨åè½¬ï¼šAâ†”Z, Bâ†”Y, Câ†”X...',
        substitution: 'ç®€å•æ›¿æ¢å¯†ç ç”¨ä¸€ä¸ªå­—æ¯æ›¿æ¢å¦ä¸€ä¸ªå­—æ¯ï¼Œå¯é€šè¿‡é¢‘ç‡åˆ†æç ´è§£ã€‚',
        vigenere: 'ç»´å‰å°¼äºšå¯†ç ä½¿ç”¨å…³é”®è¯å¾ªç¯åŠ å¯†ï¼Œè¢«ç§°ä¸º"ä¸å¯ç ´è¯‘çš„å¯†ç "é•¿è¾¾300å¹´ã€‚',
        enigma: 'æ©å°¼æ ¼ç›æœºä½¿ç”¨è½¬å­å’Œæ’çº¿æ¿ï¼Œæ¯å¤©æ›´æ¢è®¾ç½®ï¼ŒäºŒæˆ˜ä¸­è¢«å›¾çµå›¢é˜Ÿç ´è§£ã€‚',
        xor: 'XORåŠ å¯†åˆ©ç”¨å¼‚æˆ–è¿ç®—çš„ç‰¹æ€§ï¼šAâŠ•KâŠ•K=Aï¼Œæ˜¯ç°ä»£æµå¯†ç çš„åŸºç¡€ã€‚',
        rsa: 'RSAæ˜¯ç¬¬ä¸€ä¸ªå®ç”¨çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œå®‰å…¨æ€§åŸºäºå¤§æ•°åˆ†è§£çš„å›°éš¾æ€§ã€‚'
    };
    return info[cipher] || 'æ¢ç´¢è¿™ç§å¯†ç çš„å¥¥ç§˜...';
}

function tryCaesar() {
    const shift = parseInt(document.getElementById('caesarShift').value);
    document.getElementById('shiftValue').textContent = shift;
    
    const ciphertext = document.getElementById('cipherText').textContent;
    const result = ciphers.caesar.decrypt(ciphertext, shift);
    document.getElementById('toolOutput').textContent = result;
}

function tryVigenere() {
    const key = document.getElementById('vigenereKey').value.toUpperCase();
    if (!key) return;
    
    const ciphertext = document.getElementById('cipherText').textContent;
    const result = ciphers.vigenere.decrypt(ciphertext, key);
    document.getElementById('toolOutput').textContent = result;
}

function tryAtbash() {
    const ciphertext = document.getElementById('cipherText').textContent;
    const result = ciphers.atbash.decrypt(ciphertext);
    document.getElementById('toolOutput').textContent = result;
}

function showHint() {
    const level = levels[currentLevel];
    document.getElementById('hintText').innerHTML = `<span style="color:#c9a227">ğŸ’¡</span> ${level.hint}`;
}

function checkAnswer() {
    const input = document.getElementById('decryptInput').value.toUpperCase().trim();
    const level = levels[currentLevel];
    const correct = level.plaintext.toUpperCase();
    
    const resultBox = document.getElementById('resultBox');
    resultBox.style.display = 'block';
    
    if (input === correct) {
        resultBox.className = 'result-box result-success';
        resultBox.innerHTML = `
            <div style="font-size:1.2em;margin-bottom:10px;">ğŸ‰ ç ´è¯‘æˆåŠŸï¼</div>
            <div>æ˜æ–‡: ${correct}</div>
            <div style="margin-top:10px;">+100 åˆ†</div>
        `;
        
        score += 100;
        decryptedCount = Math.max(decryptedCount, currentLevel + 1);
        
        setTimeout(() => {
            loadLevel(currentLevel + 1);
        }, 2000);
    } else {
        resultBox.className = 'result-box result-error';
        resultBox.innerHTML = `
            <div>âŒ ç­”æ¡ˆä¸æ­£ç¡®</div>
            <div style="margin-top:5px;font-size:0.9em;">ç»§ç»­å°è¯•ï¼Œæˆ–ä½¿ç”¨å·¥å…·åˆ†æå¯†æ–‡</div>
        `;
    }
}

function jumpToEra(eraIndex) {
    // æ‰¾åˆ°è¯¥æ—¶ä»£çš„ç¬¬ä¸€ä¸ªå…³å¡
    const levelIndex = levels.findIndex(l => l.era === eraIndex);
    if (levelIndex >= 0) {
        loadLevel(levelIndex);
    }
}

function showVictory() {
    const area = document.getElementById('cipherArea');
    area.innerHTML = `
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;">
            <div style="font-size:4em;margin-bottom:20px;">ğŸ†</div>
            <div style="font-size:2em;color:#c9a227;margin-bottom:10px;">å¯†ç å¤§å¸ˆï¼</div>
            <div style="color:#a89878;margin-bottom:20px;">ä½ å·²ç©¿è¶Šå¯†ç å­¦çš„å†å²é•¿æ²³</div>
            <div style="color:#00ff88;font-size:1.5em;">æ€»å¾—åˆ†: ${score}</div>
            <div style="margin-top:30px;color:#8b7355;">
                ä»å‡¯æ’’çš„æˆ˜åœºåˆ°ç°ä»£äº’è”ç½‘<br>
                å¯†ç å­¦å®ˆæŠ¤ç€äººç±»çš„ç§˜å¯†
            </div>
            <button onclick="restartGame()" style="margin-top:30px;padding:12px 30px;background:#8b7355;border:none;border-radius:8px;color:#fff;font-size:1em;cursor:pointer;">é‡æ–°å¼€å§‹</button>
        </div>
    `;
}

function restartGame() {
    currentLevel = 0;
    currentEra = 0;
    score = 0;
    decryptedCount = 0;
    loadLevel(0);
}

window.onload = init;
</script>
</body>
</html>