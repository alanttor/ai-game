<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML äº’åŠ¨é¡¹ç›®å±•ç¤º</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* æ·±è‰²ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
        :root {
            --bg-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --bg-card: rgba(255, 255, 255, 0.05);
            --bg-nav: rgba(0,0,0,0.2);
            --border-color: rgba(255, 255, 255, 0.1);
            --text-primary: #fff;
            --text-secondary: #8892b0;
            --accent: #00d4ff;
            --accent-gradient: linear-gradient(90deg, #00d4ff, #7b2cbf, #ff006e);
        }
        
        /* æµ…è‰²ä¸»é¢˜ */
        [data-theme="light"] {
            --bg-primary: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #cbd5e1 100%);
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-nav: rgba(255,255,255,0.8);
            --border-color: rgba(0, 0, 0, 0.1);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent: #3b82f6;
            --accent-gradient: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
        }
        
        body {
            min-height: 100vh;
            background: var(--bg-primary);
            font-family: 'Segoe UI', Arial, sans-serif;
            color: var(--text-primary);
            padding: 30px 20px;
            transition: background 0.3s, color 0.3s;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; position: relative; }
        h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle { color: var(--text-secondary); font-size: 1em; }
        .stats { color: var(--accent); font-size: 0.9em; margin-top: 8px; }

        /* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            background: var(--bg-card);
            cursor: pointer;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .theme-toggle:hover {
            transform: rotate(30deg) scale(1.1);
            border-color: var(--accent);
        }

        /* åˆ†ç±»å¯¼èˆª */
        .category-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            background: var(--bg-nav);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        .cat-btn {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .cat-btn:hover { background: rgba(59, 130, 246, 0.1); color: var(--text-primary); }
        .cat-btn.active {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            color: #fff;
            border-color: transparent;
        }
        .cat-btn .count {
            background: rgba(0,0,0,0.2);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        /* åˆ†ç±»åŒºå— */
        .category-section {
            margin-bottom: 40px;
        }
        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }
        .category-icon { font-size: 1.8em; }
        .category-title { font-size: 1.4em; font-weight: bold; }
        .category-count { color: var(--text-secondary); font-size: 0.9em; }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .project-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .project-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--card-color, #00d4ff), transparent);
        }
        .project-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--card-color, #00d4ff);
        }
        .project-icon { font-size: 2em; margin-bottom: 10px; }
        .project-title { font-size: 1.1em; font-weight: bold; margin-bottom: 8px; color: #fff; }
        .project-desc { color: #8892b0; font-size: 0.85em; line-height: 1.5; margin-bottom: 12px; }
        .project-tags { display: flex; flex-wrap: wrap; gap: 6px; }
        .tag {
            background: rgba(0, 212, 255, 0.15);
            color: #00d4ff;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75em;
        }

        .add-card {
            background: rgba(255, 255, 255, 0.03);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 180px;
        }
        .add-card:hover { border-color: #00d4ff; background: rgba(0, 212, 255, 0.05); }
        .add-card .icon { font-size: 2.5em; margin-bottom: 10px; opacity: 0.5; }
        .add-card .text { color: #8892b0; font-size: 0.9em; }

        .delete-btn {
            position: absolute;
            top: 8px; right: 8px;
            background: rgba(255, 0, 0, 0.2);
            border: none;
            color: #ff6b6b;
            width: 26px; height: 26px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        .project-card:hover .delete-btn { opacity: 1; }
        .delete-btn:hover { background: rgba(255, 0, 0, 0.4); }

        .user-section-title {
            color: #ffd700;
            font-size: 0.85em;
            margin: 25px 0 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: #1a1a2e;
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 25px;
            max-width: 700px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-header h2 { color: #00d4ff; font-size: 1.2em; }
        .close-btn {
            background: none;
            border: none;
            color: #8892b0;
            font-size: 1.5em;
            cursor: pointer;
        }
        .close-btn:hover { color: #fff; }
        .form-group { margin-bottom: 18px; }
        .form-group label {
            display: block;
            color: #8892b0;
            margin-bottom: 6px;
            font-size: 0.85em;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-size: 0.95em;
            font-family: inherit;
        }
        .form-group textarea {
            min-height: 150px;
            font-family: 'Consolas', monospace;
            font-size: 0.85em;
        }
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00d4ff;
        }
        .btn-group { display: flex; gap: 10px; justify-content: flex-end; }
        .btn {
            padding: 10px 22px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            color: #fff;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3); }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #8892b0; }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
        .file-input-wrapper { position: relative; display: inline-block; width: 100%; }
        .file-input-wrapper input[type="file"] { display: none; }
        .file-input-label {
            display: block;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            color: #8892b0;
            transition: all 0.3s;
        }
        .file-input-label:hover { border-color: #00d4ff; color: #00d4ff; }

        /* å¯¹è¯æ¡† */
        .dialog-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .dialog-overlay.show { display: flex; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .dialog-box {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(0, 212, 255, 0.4);
            border-radius: 16px;
            padding: 25px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .dialog-icon { font-size: 2.5em; margin-bottom: 12px; }
        .dialog-title { font-size: 1.2em; color: #fff; margin-bottom: 8px; }
        .dialog-message { color: #8892b0; margin-bottom: 20px; line-height: 1.5; }
        .dialog-buttons { display: flex; gap: 10px; justify-content: center; }
        .dialog-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transition: all 0.3s;
        }
        .dialog-btn-confirm { background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: #fff; }
        .dialog-btn-confirm:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4); }
        .dialog-btn-cancel { background: rgba(255, 255, 255, 0.1); color: #8892b0; }
        .dialog-btn-cancel:hover { background: rgba(255, 255, 255, 0.2); color: #fff; }
        .dialog-btn-ok { background: linear-gradient(135deg, #00d4ff, #7b2cbf); color: #fff; min-width: 100px; }
        .dialog-btn-ok:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4); }

        .toast {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(0, 212, 255, 0.4);
            border-radius: 10px;
            padding: 12px 25px;
            color: #fff;
            font-size: 0.95em;
            z-index: 3000;
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        .toast.success { border-color: rgba(56, 239, 125, 0.5); }
        .toast.error { border-color: rgba(255, 107, 107, 0.5); }
        .toast.warning { border-color: rgba(255, 215, 0, 0.5); }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #8892b0;
            font-size: 0.9em;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6em; }
            .projects-grid { grid-template-columns: 1fr; }
            .category-nav { gap: 6px; }
            .cat-btn { padding: 8px 14px; font-size: 0.8em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
            <h1>ğŸ¨ HTML äº’åŠ¨é¡¹ç›®å±•ç¤º</h1>
            <p class="subtitle">ç‚¹å‡»å¡ç‰‡è¿›å…¥å¯¹åº”é¡¹ç›® | çº¯å‰ç«¯å®ç°ï¼Œæ— éœ€æœåŠ¡å™¨</p>
            <p class="stats" id="statsInfo"></p>
        </header>
        <nav class="category-nav" id="categoryNav"></nav>
        <main id="projectsContainer"></main>
        <footer>
            <p>ğŸ’¡ ç‚¹å‡»"æ·»åŠ é¡¹ç›®"å¡ç‰‡å¯å¯¼å…¥è‡ªå®šä¹‰HTMLé¡¹ç›®</p>
        </footer>
    </div>

    <!-- æ·»åŠ é¡¹ç›®æ¨¡æ€æ¡† -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>â• æ·»åŠ æ–°é¡¹ç›®</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="form-group">
                <label>é¡¹ç›®åç§°</label>
                <input type="text" id="projectTitle" placeholder="ä¾‹å¦‚ï¼šæˆ‘çš„åŠ¨ç”»é¡¹ç›®">
            </div>
            <div class="form-group">
                <label>é¡¹ç›®ç®€ä»‹</label>
                <input type="text" id="projectDesc" placeholder="ä¸€å¥è¯æè¿°è¿™ä¸ªé¡¹ç›®">
            </div>
            <div class="form-group">
                <label>é¡¹ç›®å›¾æ ‡ (Emoji)</label>
                <input type="text" id="projectIcon" placeholder="ä¾‹å¦‚ï¼šğŸ®" maxlength="2">
            </div>
            <div class="form-group">
                <label>å¯¼å…¥HTMLæ–‡ä»¶</label>
                <div class="file-input-wrapper">
                    <input type="file" id="htmlFile" accept=".html,.htm">
                    <label class="file-input-label" for="htmlFile">ğŸ“ ç‚¹å‡»é€‰æ‹©HTMLæ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</label>
                </div>
            </div>
            <div class="form-group">
                <label>æˆ–ç›´æ¥ç²˜è´´HTMLä»£ç  <span style="color:#8892b0;font-size:0.85em">(é™åˆ¶ 100KB)</span></label>
                <textarea id="htmlCode" placeholder="&lt;!DOCTYPE html&gt;&#10;&lt;html&gt;&#10;..." maxlength="102400"></textarea>
                <div style="text-align:right;color:#8892b0;font-size:0.75em;margin-top:4px;">
                    <span id="codeSize">0</span> / 100 KB
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" id="cancelBtn">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="saveBtn">ä¿å­˜é¡¹ç›®</button>
            </div>
        </div>
    </div>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="dialog-overlay" id="confirmDialog">
        <div class="dialog-box">
            <div class="dialog-icon" id="dialogIcon">âš ï¸</div>
            <div class="dialog-title" id="dialogTitle">ç¡®è®¤æ“ä½œ</div>
            <div class="dialog-message" id="dialogMessage">ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ</div>
            <div class="dialog-buttons">
                <button class="dialog-btn dialog-btn-cancel" id="dialogCancel">å–æ¶ˆ</button>
                <button class="dialog-btn dialog-btn-confirm" id="dialogConfirm">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- æç¤ºå¯¹è¯æ¡† -->
    <div class="dialog-overlay" id="alertDialog">
        <div class="dialog-box">
            <div class="dialog-icon" id="alertIcon">âœ…</div>
            <div class="dialog-title" id="alertTitle">æç¤º</div>
            <div class="dialog-message" id="alertMessage">æ“ä½œæˆåŠŸï¼</div>
            <div class="dialog-buttons">
                <button class="dialog-btn dialog-btn-ok" id="alertOk">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span id="toastIcon">âœ…</span>
        <span id="toastMessage">æ“ä½œæˆåŠŸ</span>
    </div>

    <script>

        // ========== å¯¹è¯æ¡†ç³»ç»Ÿ ==========
        const Dialog = {
            confirm(options) {
                return new Promise((resolve) => {
                    const overlay = document.getElementById('confirmDialog');
                    document.getElementById('dialogIcon').textContent = options.icon || 'âš ï¸';
                    document.getElementById('dialogTitle').textContent = options.title || 'ç¡®è®¤æ“ä½œ';
                    document.getElementById('dialogMessage').textContent = options.message || 'ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ';
                    const confirmBtn = document.getElementById('dialogConfirm');
                    const cancelBtn = document.getElementById('dialogCancel');
                    confirmBtn.textContent = options.confirmText || 'ç¡®å®š';
                    cancelBtn.textContent = options.cancelText || 'å–æ¶ˆ';
                    overlay.classList.add('show');
                    const handleConfirm = () => { overlay.classList.remove('show'); cleanup(); resolve(true); };
                    const handleCancel = () => { overlay.classList.remove('show'); cleanup(); resolve(false); };
                    const handleOverlay = (e) => { if (e.target === overlay) handleCancel(); };
                    const cleanup = () => {
                        confirmBtn.removeEventListener('click', handleConfirm);
                        cancelBtn.removeEventListener('click', handleCancel);
                        overlay.removeEventListener('click', handleOverlay);
                    };
                    confirmBtn.addEventListener('click', handleConfirm);
                    cancelBtn.addEventListener('click', handleCancel);
                    overlay.addEventListener('click', handleOverlay);
                });
            },
            alert(options) {
                return new Promise((resolve) => {
                    const overlay = document.getElementById('alertDialog');
                    document.getElementById('alertIcon').textContent = options.icon || 'âœ…';
                    document.getElementById('alertTitle').textContent = options.title || 'æç¤º';
                    document.getElementById('alertMessage').textContent = options.message || 'æ“ä½œå®Œæˆ';
                    overlay.classList.add('show');
                    const okBtn = document.getElementById('alertOk');
                    const handleOk = () => { overlay.classList.remove('show'); okBtn.removeEventListener('click', handleOk); overlay.removeEventListener('click', handleOverlay); resolve(); };
                    const handleOverlay = (e) => { if (e.target === overlay) handleOk(); };
                    okBtn.addEventListener('click', handleOk);
                    overlay.addEventListener('click', handleOverlay);
                });
            },
            toast(message, type = 'success', duration = 3000) {
                const toast = document.getElementById('toast');
                const icons = { success: 'âœ…', error: 'âŒ', warning: 'âš ï¸', info: 'â„¹ï¸' };
                document.getElementById('toastIcon').textContent = icons[type] || icons.success;
                document.getElementById('toastMessage').textContent = message;
                toast.className = 'toast ' + type;
                toast.classList.add('show');
                setTimeout(() => { toast.classList.remove('show'); }, duration);
            }
        };

        // ========== åˆ†ç±»å®šä¹‰ ==========
        const categories = {
            all: { name: 'å…¨éƒ¨', icon: 'ğŸ“š', color: '#00d4ff' },
            physics: { name: 'ç‰©ç†æ¨¡æ‹Ÿ', icon: 'âš›ï¸', color: '#00ffff' },
            sports: { name: 'è¿åŠ¨ç§‘å­¦', icon: 'ğŸƒ', color: '#7fff7f' },
            biology: { name: 'ç”Ÿå‘½ç§‘å­¦', icon: 'ğŸ§¬', color: '#ff6b6b' },
            engineering: { name: 'å·¥ç¨‹æŠ€æœ¯', icon: 'âš™ï¸', color: '#ffd700' },
            algorithm: { name: 'ç®—æ³•å¯è§†åŒ–', icon: 'ğŸ§®', color: '#a78bfa' },
            art: { name: 'è‰ºæœ¯åˆ›æ„', icon: 'ğŸ¨', color: '#ff69b4' },
            history: { name: 'å†å²äººæ–‡', icon: 'ğŸ“œ', color: '#d4a574' },
            environment: { name: 'ç¯å¢ƒåœ°çƒ', icon: 'ğŸŒ', color: '#4caf50' },
            life: { name: 'ç”Ÿæ´»å·¥å…·', icon: 'ğŸ ', color: '#4fc3f7' },
            game: { name: 'æ¸¸æˆæ•™è‚²', icon: 'ğŸ®', color: '#ff9800' },
            web: { name: 'ç½‘é¡µæ¨¡æ¿', icon: 'ğŸŒ', color: '#2196f3' }
        };

        // ========== é¡¹ç›®æ•°æ®ï¼ˆæŒ‰åˆ†ç±»ï¼‰ ==========
        const builtInProjects = [
            // ç‰©ç†æ¨¡æ‹Ÿ
            { title: 'å…­è¾¹å½¢å¼¹è·³å°çƒ', file: 'physics/hexagon-bouncing-ball.html', icon: 'â¬¡', color: '#00d4ff', category: 'physics',
              desc: 'å°çƒåœ¨æ—‹è½¬çš„å…­è¾¹å½¢è¾¹ç•Œå†…å¼¹è·³ï¼Œå¯è°ƒèŠ‚é‡åŠ›ã€å¼¹æ€§ã€æ—‹è½¬é€Ÿåº¦', tags: ['ç‰©ç†æ¨¡æ‹Ÿ', 'Canvas'] },
            { title: 'ç –å—çƒŸå›±çˆ†ç ´', file: 'physics/chimney-demolition.html', icon: 'ğŸ’¥', color: '#ff6b6b', category: 'physics',
              desc: '3Dç –å—çƒŸå›±çˆ†ç ´æ¨¡æ‹Ÿï¼Œæ”¯æŒè§†è§’æ—‹è½¬ã€ç‰©ç†ç¢°æ’', tags: ['3Dæ¸²æŸ“', 'ç‰©ç†å¼•æ“'] },
            { title: 'ç²’å­æ¼©æ¶¡', file: 'physics/particle-vortex.html', icon: 'ğŸŒ€', color: '#ff00ff', category: 'physics',
              desc: 'ç‚¹å‡»åˆ›å»ºé»‘æ´å¸å¼•ç²’å­ï¼Œæ¾å¼€åç²’å­å››æ•£', tags: ['ç²’å­ç³»ç»Ÿ', 'äº¤äº’'] },
            { title: 'é‡å­æ³¢å‡½æ•°æ¨¡æ‹Ÿå™¨', file: 'physics/quantum-simulator.html', icon: 'âš›ï¸', color: '#00ffff', category: 'physics',
              desc: 'é‡å­åŠ›å­¦åŠ¿é˜±ä¸­çš„æ³¢å‡½æ•°å¯è§†åŒ–', tags: ['é‡å­ç‰©ç†', 'ç§‘å­¦'] },
            { title: 'å¼•åŠ›æ³¢æ—¶ç©ºæ¨¡æ‹Ÿå™¨', file: 'physics/gravitational-waves.html', icon: 'ğŸŒŒ', color: '#0af', category: 'physics',
              desc: 'åŒé»‘æ´åˆå¹¶å¼•åŠ›æ³¢æ¨¡æ‹Ÿï¼Œæ—¶ç©ºæ‰­æ›²å¯è§†åŒ–', tags: ['å¤©ä½“ç‰©ç†', 'ç›¸å¯¹è®º'] },
            { title: 'é‡å­è®¡ç®—é—¨æ¨¡æ‹Ÿå™¨', file: 'physics/quantum-gates.html', icon: 'ğŸ”¬', color: '#a6f', category: 'physics',
              desc: 'é‡å­æ¯”ç‰¹å’Œé€»è¾‘é—¨å¯è§†åŒ–ï¼Œå¸ƒæ´›èµ«çƒä½“', tags: ['é‡å­è®¡ç®—', 'æ•™è‚²'] },
            { title: 'æ··æ²Œå¸å¼•å­3D', file: 'physics/chaos-attractor.html', icon: 'ğŸ¦‹', color: '#0f0', category: 'physics',
              desc: 'æ´›ä¼¦å…¹ã€ç½—æ–¯å‹’ç­‰æ··æ²Œç³»ç»Ÿ3Då¯è§†åŒ–', tags: ['æ··æ²Œç†è®º', 'æ•°å­¦'] },
            { title: 'æ—¶ç©ºå…‰é”¥æ¨¡æ‹Ÿå™¨', file: 'physics/lightcone-relativity.html', icon: 'â³', color: '#00d4ff', category: 'physics',
              desc: 'ç‹­ä¹‰ç›¸å¯¹è®ºå¯è§†åŒ–ï¼Œå…‰é”¥ã€æ´›ä¼¦å…¹å˜æ¢', tags: ['ç›¸å¯¹è®º', 'æ—¶ç©º'] },
            { title: 'æµä½“åŠ¨åŠ›å­¦æ¨¡æ‹Ÿ', file: 'physics/fluid-dynamics.html', icon: 'ğŸ’§', color: '#0af', category: 'physics',
              desc: 'çº³ç»´-æ–¯æ‰˜å…‹æ–¯æ–¹ç¨‹æµä½“æ¨¡æ‹Ÿï¼Œæ¶¡æ—‹æ¼”åŒ–', tags: ['æµä½“', 'ç‰©ç†'] },
            { title: 'åˆ†å­è½¨é“æ¨¡æ‹Ÿå™¨', file: 'physics/molecular-orbital.html', icon: 'ğŸ§ª', color: '#a0f', category: 'physics',
              desc: 'é‡å­åŒ–å­¦åˆ†å­è½¨é“å¯è§†åŒ–ï¼Œç”µå­äº‘', tags: ['åŒ–å­¦', 'é‡å­'] },

            // è¿åŠ¨ç§‘å­¦
            { title: 'ç¾½æ¯›çƒé£è¡Œç‰©ç†', file: 'sports/badminton-physics.html', icon: 'ğŸ¸', color: '#7fff7f', category: 'sports',
              desc: 'ç©ºæ°”åŠ¨åŠ›å­¦ç¾½æ¯›çƒè½¨è¿¹æ¨¡æ‹Ÿï¼Œå‡»çƒæŠ€æœ¯åˆ†æ', tags: ['ç¾½æ¯›çƒ', 'ç‰©ç†'] },
            { title: 'ç¯®çƒæŠ•ç¯®åŠ›å­¦', file: 'sports/basketball-shooting.html', icon: 'ğŸ€', color: '#ff6b35', category: 'sports',
              desc: 'æŠ•ç¯®å¼¹é“ç‰©ç†æ¨¡æ‹Ÿï¼Œå‡ºæ‰‹è§’åº¦ä¸å‘½ä¸­ç‡', tags: ['ç¯®çƒ', 'åŠ›å­¦'] },
            { title: 'æ’çƒç”Ÿç‰©åŠ›å­¦', file: 'sports/volleyball-mechanics.html', icon: 'ğŸ', color: '#ffd700', category: 'sports',
              desc: 'æ‰£çƒå‘çƒç‰©ç†æ¨¡æ‹Ÿï¼Œé£˜çƒæ•ˆåº”', tags: ['æ’çƒ', 'ç”Ÿç‰©åŠ›å­¦'] },
            { title: 'ä¸‰çƒè¿åŠ¨ç‰©ç†å¯¹æ¯”', file: 'sports/sports-physics-compare.html', icon: 'ğŸ¯', color: '#4af', category: 'sports',
              desc: 'ç¾½æ¯›çƒ/ç¯®çƒ/æ’çƒç‰©ç†åŸç†å¯¹æ¯”åˆ†æ', tags: ['è¿åŠ¨ç§‘å­¦', 'å¯¹æ¯”'] },
            { title: 'äººä½“è¿åŠ¨ç”Ÿç‰©åŠ›å­¦', file: 'sports/biomechanics.html', icon: 'ğŸƒ', color: '#ff6b6b', category: 'sports',
              desc: 'éª¨éª¼åŠ¨ç”»ä¸è‚Œè‚‰æ¿€æ´»åˆ†æï¼Œæ­¥æ€å‘¨æœŸ', tags: ['ç”Ÿç‰©åŠ›å­¦', 'äººä½“'] },
            { title: 'è¿åŠ¨æŸä¼¤åº·å¤è§„åˆ’', file: 'sports/injury-rehab.html', icon: 'ğŸ©¹', color: '#64ffda', category: 'sports',
              desc: 'ä»æŸä¼¤åˆ°åº·å¤çš„æ—¶é—´çº¿æ¨¡æ‹Ÿ', tags: ['åŒ»å­¦', 'åº·å¤'] },

            // ç”Ÿå‘½ç§‘å­¦
            { title: 'ç¥ç»ç½‘ç»œå¯è§†åŒ–', file: 'biology/neural-network.html', icon: 'ğŸ§ ', color: '#00ff00', category: 'biology',
              desc: 'äº¤äº’å¼ç¥ç»ç½‘ç»œå­¦ä¹ å™¨ï¼Œå‰å‘/åå‘ä¼ æ’­', tags: ['æœºå™¨å­¦ä¹ ', 'AI'] },
            { title: 'äººä½“ç”Ÿç†æ¨¡æ‹Ÿå™¨', file: 'biology/body-physiology.html', icon: 'ğŸ«€', color: '#ff4466', category: 'biology',
              desc: 'å¤šç³»ç»Ÿåè°ƒçš„äººä½“ç”Ÿç†å­¦ä»¿çœŸ', tags: ['ç”Ÿç†å­¦', 'åŒ»å­¦'] },
            { title: 'æµè¡Œç—…ä¼ æ’­æ¨¡æ‹Ÿ', file: 'biology/epidemic-spread.html', icon: 'ğŸ¦ ', color: '#44ff88', category: 'biology',
              desc: 'SEIRç½‘ç»œä¼ æ’­æ¨¡å‹ï¼Œå¹²é¢„æªæ–½åˆ†æ', tags: ['æµè¡Œç—…å­¦', 'ç½‘ç»œ'] },
            { title: 'ç¡çœ ä¸æ¢¦å¢ƒç”Ÿæˆå™¨', file: 'biology/sleep-dream.html', icon: 'ğŸŒ™', color: '#a78bfa', category: 'biology',
              desc: 'ç¡çœ å‘¨æœŸæ¨¡æ‹Ÿä¸æ¢¦å¢ƒå†…å®¹ç”Ÿæˆ', tags: ['ç¡çœ ', 'ç¥ç»ç§‘å­¦'] },

            // å·¥ç¨‹æŠ€æœ¯
            { title: 'æ•°å­—ç”µè·¯ä»¿çœŸå™¨', file: 'engineering/digital-circuit.html', icon: 'ğŸ”Œ', color: '#00ff00', category: 'engineering',
              desc: 'é€»è¾‘é—¨ç”µè·¯è®¾è®¡ä¸ä»¿çœŸï¼Œç¤ºæ³¢å™¨åˆ†æ', tags: ['ç”µå­', 'æ•°å­—ç”µè·¯'] },
            { title: 'é½¿è½®ä¼ åŠ¨è®¾è®¡å™¨', file: 'engineering/gear-system.html', icon: 'âš™ï¸', color: '#708090', category: 'engineering',
              desc: 'å‚æ•°åŒ–é½¿è½®ç³»ç»Ÿè®¾è®¡ï¼Œä¼ åŠ¨æ¯”è®¡ç®—', tags: ['æœºæ¢°', 'ä¼ åŠ¨'] },
            { title: 'PIDæ§åˆ¶ä»¿çœŸ', file: 'engineering/pid-control.html', icon: 'ğŸ›ï¸', color: '#4080c0', category: 'engineering',
              desc: 'å·¥ä¸šè¿‡ç¨‹PIDæ§åˆ¶ä»¿çœŸï¼Œå‚æ•°æ•´å®š', tags: ['æ§åˆ¶', 'è‡ªåŠ¨åŒ–'] },
            { title: 'å…‰çº¿è¿½è¸ªå·¥ä½œå®¤', file: 'engineering/raytracing-studio.html', icon: 'ğŸ’', color: '#4af', category: 'engineering',
              desc: 'å®æ—¶å…‰çº¿è¿½è¸ªæ¸²æŸ“ï¼Œæè´¨ç¼–è¾‘', tags: ['3D', 'æ¸²æŸ“'] },

            // ç®—æ³•å¯è§†åŒ–
            { title: 'æ•°æ®ç»“æ„å¡”é˜²', file: 'algorithm/ds-tower-defense.html', icon: 'ğŸ°', color: '#667eea', category: 'algorithm',
              desc: 'é€šè¿‡å¡”é˜²æ¸¸æˆå­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•', tags: ['ç®—æ³•', 'æ¸¸æˆ'] },
            { title: 'æ’åºç®—æ³•èˆè¹ˆ', file: 'algorithm/sorting-dance.html', icon: 'ğŸ•º', color: '#f9ca24', category: 'algorithm',
              desc: 'å¯è§†åŒ–æ’åºç®—æ³•ï¼Œæ•°å­—åŒ–èº«èˆè€…', tags: ['ç®—æ³•', 'å¯è§†åŒ–'] },
            { title: 'é€’å½’åˆ†æ²»é­”æ³•', file: 'algorithm/recursion-puzzle.html', icon: 'ğŸ”®', color: '#a855f7', category: 'algorithm',
              desc: 'é€’å½’ä¸åˆ†æ²»å¯è§†åŒ–ï¼Œæ±‰è¯ºå¡”ã€åˆ†å½¢', tags: ['é€’å½’', 'åˆ†å½¢'] },

            // è‰ºæœ¯åˆ›æ„
            { title: 'åˆ†å½¢è‰ºæœ¯ç”Ÿæˆå™¨', file: 'art/fractal-art.html', icon: 'ğŸ¨', color: '#f0a', category: 'art',
              desc: 'æ›¼å¾·å‹ƒç½—é›†ã€æœ±åˆ©äºšé›†å®æ—¶æ¸²æŸ“', tags: ['åˆ†å½¢', 'è‰ºæœ¯'] },
            { title: 'æ•°å­—æ°´å¢¨ç»˜ç”»', file: 'art/ink-painting.html', icon: 'ğŸ–Œï¸', color: '#c4a060', category: 'art',
              desc: 'ç‰©ç†æ¨¡æ‹Ÿæ°´å¢¨æ‰©æ•£ï¼Œå®£çº¸çº¹ç†', tags: ['ç»˜ç”»', 'è‰ºæœ¯'] },
            { title: 'åŠ¨ç”»å¤©æ°”å¡ç‰‡', file: 'art/weather-cards.html', icon: 'ğŸŒ¤ï¸', color: '#38ef7d', category: 'art',
              desc: 'å››ç§å¤©æ°”åŠ¨ç”»å¡ç‰‡ï¼šæ™´å¤©ã€é›¨å¤©ã€é›ªå¤©ã€å¤§é£', tags: ['CSSåŠ¨ç”»', 'å¡ç‰‡'] },

            // å†å²äººæ–‡
            { title: 'ä¸ç»¸ä¹‹è·¯è´¸æ˜“ç½‘ç»œ', file: 'history/silk-road.html', icon: 'ğŸ«', color: '#d4a574', category: 'history',
              desc: 'å¤ä»£ä¸ç»¸ä¹‹è·¯è´¸æ˜“æ¨¡æ‹Ÿï¼Œå•†é˜ŸåŠ¨ç”»', tags: ['å†å²', 'è´¸æ˜“'] },
            { title: 'å¤ä»£çŒæº‰ç³»ç»Ÿ', file: 'history/ancient-irrigation.html', icon: 'ğŸŒ¾', color: '#4a90a4', category: 'history',
              desc: 'å››å¤§æ–‡æ˜çŒæº‰ç³»ç»Ÿæ¨¡æ‹Ÿï¼Œæ°´åˆ©å·¥ç¨‹', tags: ['å†å²', 'æ°´åˆ©'] },
            { title: 'å°å»ºç¤¾ä¼šæ¨¡æ‹Ÿå™¨', file: 'history/feudal-society.html', icon: 'ğŸ‘‘', color: '#c4a060', category: 'history',
              desc: 'ä¸­ä¸–çºªå°å»ºåˆ¶åº¦æ¨¡æ‹Ÿï¼Œç¤¾ä¼šé˜¶å±‚', tags: ['å†å²', 'ç¤¾ä¼š'] },
            { title: 'å¯†ç å­¦å†å²å†’é™©', file: 'history/crypto-history.html', icon: 'ğŸ”', color: '#c9a227', category: 'history',
              desc: 'ä»å‡¯æ’’å¯†ç åˆ°RSAï¼Œç©¿è¶Šå¯†ç å­¦å†å²', tags: ['å¯†ç å­¦', 'å†å²'] },
            { title: 'å…¨çƒæ‰‹åŠ¿æ–‡åŒ–å›¾é‰´', file: 'history/gesture-culture.html', icon: 'ğŸ¤š', color: '#ffd700', category: 'history',
              desc: 'è·¨æ–‡åŒ–æ‰‹åŠ¿å«ä¹‰å¯¹æ¯”ï¼Œé¿å…è¯¯è§£', tags: ['æ–‡åŒ–', 'æ‰‹åŠ¿'] },

            // ç¯å¢ƒåœ°çƒ
            { title: 'å¤ªé˜³ç³»æ¨¡æ‹Ÿå™¨', file: 'environment/solar-system.html', icon: 'â˜€ï¸', color: '#ffd700', category: 'environment',
              desc: 'å…«å¤§è¡Œæ˜Ÿå›´ç»•å¤ªé˜³å…¬è½¬ï¼Œå¯è°ƒèŠ‚æ—¶é—´å€é€Ÿ', tags: ['å¤©æ–‡', 'åŠ¨ç”»'] },
            { title: 'åœ°çƒæ°”å€™æ¨¡æ‹Ÿå™¨', file: 'environment/climate-system.html', icon: 'ğŸŒ', color: '#4488cc', category: 'environment',
              desc: 'ä»å†°æ²³æœŸåˆ°æœªæ¥ï¼Œæ°”å€™å˜åŒ–æ—¶é—´æ—…è¡Œ', tags: ['æ°”å€™', 'åœ°çƒç§‘å­¦'] },
            { title: 'æµ·æ´‹å¡‘æ–™æ±¡æŸ“è¿½è¸ª', file: 'environment/ocean-plastic.html', icon: 'ğŸŒŠ', color: '#0077be', category: 'environment',
              desc: 'å…¨çƒæµ·æ´‹å¡‘æ–™æ±¡æŸ“å¯è§†åŒ–ï¼Œåƒåœ¾å¸¦åˆ†å¸ƒ', tags: ['ç¯å¢ƒ', 'æµ·æ´‹'] },
            { title: 'æç«¯ç¯å¢ƒç”Ÿå­˜æŒ‘æˆ˜', file: 'environment/survival-challenge.html', icon: 'ğŸ”ï¸', color: '#4a90a4', category: 'environment',
              desc: 'ç å³°ã€æ·±æµ·ã€æ²™æ¼ ã€å¤ªç©ºå››å¤§æç«¯ç¯å¢ƒ', tags: ['ç”Ÿå­˜', 'æ¨¡æ‹Ÿ'] },

            // ç”Ÿæ´»å·¥å…·
            { title: 'å®¶åº­èƒ½æºç®¡å®¶', file: 'life/energy-manager.html', icon: 'ğŸ ', color: '#48bb78', category: 'life',
              desc: 'å®¶åº­èƒ½è€—æ¨¡æ‹Ÿä¸èŠ‚èƒ½ä¼˜åŒ–ï¼Œç”µè´¹è®¡ç®—', tags: ['èŠ‚èƒ½', 'æ™ºèƒ½å®¶å±…'] },
            { title: 'å¤åˆ©ç†è´¢æ¨¡æ‹Ÿå™¨', file: 'life/wealth-simulator.html', icon: 'ğŸ’°', color: '#ffd700', category: 'life',
              desc: 'ä¸ªäººè´¢å¯Œå¢é•¿è§„åˆ’ï¼Œå¤åˆ©è®¡ç®—', tags: ['ç†è´¢', 'æŠ•èµ„'] },
            { title: 'æ™ºèƒ½é¤ç›˜è¥å…»åˆ†æ', file: 'life/nutrition-planner.html', icon: 'ğŸ¥—', color: '#4caf50', category: 'life',
              desc: 'äº¤äº’å¼é¤ç›˜è¥å…»åˆ†æï¼Œçƒ­é‡è®¡ç®—', tags: ['å¥åº·', 'è¥å…»'] },
            { title: 'é€šå‹¤è·¯çº¿è§„åˆ’', file: 'life/commute-planner.html', icon: 'ğŸš—', color: '#4fc3f7', category: 'life',
              desc: 'å¤šäº¤é€šæ–¹å¼é€šå‹¤æˆæœ¬ä¸æ•ˆç‡æ¨¡æ‹Ÿ', tags: ['äº¤é€š', 'è§„åˆ’'] },
            { title: 'è™šæ‹Ÿæ™ºèƒ½èŠ±å›­', file: 'life/virtual-garden.html', icon: 'ğŸŒ±', color: '#4caf50', category: 'life',
              desc: 'å®¤å†…å¤–æ¤ç‰©ç”Ÿé•¿å…»æŠ¤æ¨¡æ‹Ÿ', tags: ['æ¤ç‰©', 'å…»æŠ¤'] },

            // æ¸¸æˆæ•™è‚²
            { title: 'æ‰“å­—ç»ƒä¹ æ¸¸æˆ', file: 'game/typing-game.html', icon: 'âŒ¨ï¸', color: '#667eea', category: 'game',
              desc: 'è‹±æ–‡æ‰“å­—ç»ƒä¹ ï¼Œå®æ—¶æ˜¾ç¤ºWPMã€å‡†ç¡®ç‡', tags: ['æ¸¸æˆ', 'ç»ƒä¹ '] },
            { title: 'ç¼–ç¨‹è¯­æ³•å†’é™©', file: 'game/code-adventure.html', icon: 'ğŸ§™', color: '#00ffaa', category: 'game',
              desc: 'æ¸¸æˆåŒ–ç¼–ç¨‹å­¦ä¹ ï¼ŒPython/JS/Javaè¯­æ³•', tags: ['ç¼–ç¨‹', 'æ¸¸æˆ'] },

            // ç½‘é¡µæ¨¡æ¿
            { title: 'ä¼ä¸šå®˜ç½‘æ¨¡æ¿', file: 'web/corporate-website.html', icon: 'ğŸ¢', color: '#2563eb', category: 'web',
              desc: 'å“åº”å¼ä¼ä¸šå®˜ç½‘é¦–é¡µï¼Œå¯¼èˆªã€è½®æ’­å›¾', tags: ['å“åº”å¼', 'ç½‘ç«™æ¨¡æ¿'] },
            { title: 'ç‰©è”ç½‘å¹³å°æ¨¡æ¿', file: 'web/iot-platform.html', icon: 'ğŸ“¡', color: '#00d4ff', category: 'web',
              desc: 'å·¥ä¸šç‰©è”ç½‘å¹³å°é¦–é¡µï¼Œè®¾å¤‡ç›‘æ§ã€æ•°æ®å¯è§†åŒ–', tags: ['IoT', 'å¹³å°æ¨¡æ¿'] },
            { title: 'æ–¹æ¡ˆå¹³å°æ¨¡æ¿', file: 'web/solution-platform.html', icon: 'ğŸ’¡', color: '#6366f1', category: 'web',
              desc: 'ä¼ä¸šè§£å†³æ–¹æ¡ˆå¹³å°ï¼Œæ–¹æ¡ˆå±•ç¤ºã€æœåŠ¡å•†å…¥é©»', tags: ['æ–¹æ¡ˆ', 'å¹³å°æ¨¡æ¿'] },
            { title: 'MESç³»ç»Ÿæ¨¡æ¿', file: 'web/mes-system.html', icon: 'ğŸ­', color: '#3b82f6', category: 'web',
              desc: 'æ•°å­—åŒ–åˆ¶é€ æ‰§è¡Œç³»ç»Ÿï¼Œç”Ÿäº§çœ‹æ¿ã€å·¥å•ç®¡ç†', tags: ['MES', 'ç³»ç»Ÿæ¨¡æ¿'] }
        ];

        // ========== GitHub é…ç½® ==========
        const GITHUB_CONFIG = {
            owner: 'alanttor',
            repo: 'ai-game',
            path: 'prompt-word-demo/data/projects.json',
            token: '%%GITHUB_TOKEN%%'
        };
        const USE_GITHUB_STORAGE = GITHUB_CONFIG.token !== '' && !GITHUB_CONFIG.token.includes('%%');

        // ========== å­˜å‚¨å±‚ ==========
        const Storage = {
            fileSha: null,
            async getProjects() {
                if (!USE_GITHUB_STORAGE) {
                    const data = localStorage.getItem('userProjects');
                    return data ? JSON.parse(data) : [];
                }
                try {
                    const encodedPath = encodeURIComponent(GITHUB_CONFIG.path).replace(/%2F/g, '/');
                    const res = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${encodedPath}`, {
                        headers: { 'Authorization': `token ${GITHUB_CONFIG.token}`, 'Accept': 'application/vnd.github.v3+json' }
                    });
                    if (!res.ok) { if (res.status === 404) return []; throw new Error('è·å–æ•°æ®å¤±è´¥'); }
                    const data = await res.json();
                    this.fileSha = data.sha;
                    return JSON.parse(decodeURIComponent(escape(atob(data.content))));
                } catch (error) {
                    console.error('GitHub è¯»å–å¤±è´¥:', error);
                    Dialog.toast('äº‘ç«¯è¯»å–å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®', 'warning');
                    const data = localStorage.getItem('userProjects');
                    return data ? JSON.parse(data) : [];
                }
            },
            async saveProjects(projects) {
                localStorage.setItem('userProjects', JSON.stringify(projects));
                if (!USE_GITHUB_STORAGE) return true;
                try {
                    const content = btoa(unescape(encodeURIComponent(JSON.stringify(projects, null, 2))));
                    const body = { message: `æ›´æ–°é¡¹ç›®æ•°æ® - ${new Date().toLocaleString('zh-CN')}`, content: content, branch: 'master' };
                    if (this.fileSha) body.sha = this.fileSha;
                    const encodedPath = encodeURIComponent(GITHUB_CONFIG.path).replace(/%2F/g, '/');
                    const res = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${encodedPath}`, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${GITHUB_CONFIG.token}`, 'Accept': 'application/vnd.github.v3+json', 'Content-Type': 'application/json' },
                        body: JSON.stringify(body)
                    });
                    if (!res.ok) throw new Error('ä¿å­˜å¤±è´¥');
                    const data = await res.json();
                    this.fileSha = data.content.sha;
                    return true;
                } catch (error) {
                    console.error('GitHub ä¿å­˜å¤±è´¥:', error);
                    Dialog.toast('äº‘ç«¯ä¿å­˜å¤±è´¥ï¼Œå·²ä¿å­˜åˆ°æœ¬åœ°', 'warning');
                    return false;
                }
            }
        };

        let userProjectsCache = [];
        let currentCategory = 'all';

        async function loadUserProjects() { userProjectsCache = await Storage.getProjects(); return userProjectsCache; }
        function getUserProjects() { return userProjectsCache; }
        async function saveUserProjects(projects) { userProjectsCache = projects; await Storage.saveProjects(projects); }
        async function addUserProject(project) {
            const projects = getUserProjects();
            project.id = Date.now();
            project.createdAt = new Date().toISOString();
            projects.push(project);
            await saveUserProjects(projects);
            renderProjects();
        }
        async function deleteUserProject(id) {
            const projects = getUserProjects().filter(p => p.id !== id);
            await saveUserProjects(projects);
            renderProjects();
        }

        // ========== æ¸²æŸ“åˆ†ç±»å¯¼èˆª ==========
        function renderCategoryNav() {
            const nav = document.getElementById('categoryNav');
            const counts = { all: builtInProjects.length };
            
            builtInProjects.forEach(p => {
                counts[p.category] = (counts[p.category] || 0) + 1;
            });
            
            nav.innerHTML = Object.entries(categories).map(([key, cat]) => `
                <button class="cat-btn ${currentCategory === key ? 'active' : ''}" onclick="selectCategory('${key}')">
                    <span>${cat.icon}</span>
                    <span>${cat.name}</span>
                    <span class="count">${counts[key] || 0}</span>
                </button>
            `).join('');
        }

        function selectCategory(cat) {
            currentCategory = cat;
            renderCategoryNav();
            renderProjects();
        }

        // ========== æ¸²æŸ“é¡¹ç›® ==========
        async function renderProjects() {
            const container = document.getElementById('projectsContainer');
            container.innerHTML = '<div style="text-align:center;padding:40px;color:#8892b0;">åŠ è½½ä¸­...</div>';

            if (userProjectsCache.length === 0) await loadUserProjects();

            let html = '';
            
            if (currentCategory === 'all') {
                // æŒ‰åˆ†ç±»åˆ†ç»„æ˜¾ç¤º
                Object.entries(categories).forEach(([catKey, cat]) => {
                    if (catKey === 'all') return;
                    const catProjects = builtInProjects.filter(p => p.category === catKey);
                    if (catProjects.length === 0) return;
                    
                    html += `
                        <section class="category-section">
                            <div class="category-header" style="border-color: ${cat.color};">
                                <span class="category-icon">${cat.icon}</span>
                                <span class="category-title" style="color: ${cat.color};">${cat.name}</span>
                                <span class="category-count">(${catProjects.length}ä¸ªé¡¹ç›®)</span>
                            </div>
                            <div class="projects-grid">
                                ${catProjects.map(p => createProjectCardHTML(p, false)).join('')}
                            </div>
                        </section>
                    `;
                });
            } else {
                // æ˜¾ç¤ºå•ä¸ªåˆ†ç±»
                const cat = categories[currentCategory];
                const catProjects = builtInProjects.filter(p => p.category === currentCategory);
                
                html += `
                    <section class="category-section">
                        <div class="category-header" style="border-color: ${cat.color};">
                            <span class="category-icon">${cat.icon}</span>
                            <span class="category-title" style="color: ${cat.color};">${cat.name}</span>
                            <span class="category-count">(${catProjects.length}ä¸ªé¡¹ç›®)</span>
                        </div>
                        <div class="projects-grid">
                            ${catProjects.map(p => createProjectCardHTML(p, false)).join('')}
                        </div>
                    </section>
                `;
            }

            // ç”¨æˆ·é¡¹ç›®
            const userProjects = getUserProjects();
            if (userProjects.length > 0) {
                html += `
                    <div class="user-section-title">ğŸ“¦ ç¤¾åŒºé¡¹ç›® (${userProjects.length})</div>
                    <div class="projects-grid">
                        ${userProjects.map(p => createProjectCardHTML(p, true)).join('')}
                    </div>
                `;
            }

            // æ·»åŠ é¡¹ç›®å¡ç‰‡
            html += `
                <div class="projects-grid" style="margin-top: 20px;">
                    <div class="add-card" onclick="document.getElementById('addModal').classList.add('show')">
                        <div class="icon">â•</div>
                        <div class="text">æ·»åŠ æ–°é¡¹ç›®</div>
                    </div>
                </div>
            `;

            container.innerHTML = html;
            
            // ç»‘å®šåˆ é™¤æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', async (e) => {
                    e.stopPropagation();
                    const id = parseInt(btn.dataset.id);
                    const project = userProjects.find(p => p.id === id);
                    const confirmed = await Dialog.confirm({
                        icon: 'ğŸ—‘ï¸',
                        title: 'åˆ é™¤é¡¹ç›®',
                        message: `ç¡®å®šè¦åˆ é™¤ã€Œ${project?.title}ã€å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,
                        confirmText: 'åˆ é™¤',
                        cancelText: 'å–æ¶ˆ'
                    });
                    if (confirmed) {
                        deleteUserProject(id);
                        Dialog.toast('é¡¹ç›®å·²åˆ é™¤', 'success');
                    }
                });
            });

            // æ›´æ–°ç»Ÿè®¡
            document.getElementById('statsInfo').textContent = `å…± ${builtInProjects.length} ä¸ªå†…ç½®é¡¹ç›®ï¼Œ${Object.keys(categories).length - 1} ä¸ªåˆ†ç±»`;
        }

        function createProjectCardHTML(project, isUserProject) {
            const deleteBtn = isUserProject ? `<button class="delete-btn" data-id="${project.id}">Ã—</button>` : '';
            return `
                <div class="project-card" style="--card-color: ${project.color || '#00d4ff'};" 
                     data-file="${project.file || ''}" data-user="${isUserProject}" data-id="${project.id || ''}">
                    ${deleteBtn}
                    <div class="project-icon">${project.icon}</div>
                    <div class="project-title">${project.title}</div>
                    <div class="project-desc">${project.desc}</div>
                    <div class="project-tags">
                        ${(project.tags || ['è‡ªå®šä¹‰']).map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `;
        }

        // ========== æ¨¡æ€æ¡†é€»è¾‘ ==========
        const modal = document.getElementById('addModal');
        document.getElementById('closeModal').addEventListener('click', () => modal.classList.remove('show'));
        document.getElementById('cancelBtn').addEventListener('click', () => modal.classList.remove('show'));
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('show'); });

        const htmlFile = document.getElementById('htmlFile');
        const htmlCode = document.getElementById('htmlCode');
        const fileLabel = document.querySelector('.file-input-label');

        htmlFile.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 100 * 1024) {
                    Dialog.alert({ icon: 'âš ï¸', title: 'æ–‡ä»¶è¿‡å¤§', message: `æ–‡ä»¶å¤§å° ${(file.size/1024).toFixed(1)}KB è¶…è¿‡é™åˆ¶ï¼ˆ100KBï¼‰` });
                    return;
                }
                fileLabel.textContent = `âœ… å·²é€‰æ‹©: ${file.name} (${(file.size/1024).toFixed(1)}KB)`;
                const reader = new FileReader();
                reader.onload = (e) => { htmlCode.value = e.target.result; updateCodeSize(); };
                reader.readAsText(file);
            }
        });

        function updateCodeSize() {
            const size = new Blob([htmlCode.value]).size;
            document.getElementById('codeSize').textContent = (size / 1024).toFixed(1);
            document.getElementById('codeSize').style.color = size > 100 * 1024 ? '#ff6b6b' : '#8892b0';
        }
        htmlCode.addEventListener('input', updateCodeSize);

        fileLabel.addEventListener('dragover', (e) => { e.preventDefault(); fileLabel.style.borderColor = '#00d4ff'; });
        fileLabel.addEventListener('dragleave', () => { fileLabel.style.borderColor = ''; });
        fileLabel.addEventListener('drop', (e) => {
            e.preventDefault();
            fileLabel.style.borderColor = '';
            const file = e.dataTransfer.files[0];
            if (file && (file.name.endsWith('.html') || file.name.endsWith('.htm'))) {
                fileLabel.textContent = `âœ… å·²é€‰æ‹©: ${file.name}`;
                const reader = new FileReader();
                reader.onload = (e) => { htmlCode.value = e.target.result; updateCodeSize(); };
                reader.readAsText(file);
            }
        });

        document.getElementById('saveBtn').addEventListener('click', async () => {
            const title = document.getElementById('projectTitle').value.trim();
            const desc = document.getElementById('projectDesc').value.trim();
            const icon = document.getElementById('projectIcon').value.trim() || 'ğŸ“„';
            const code = htmlCode.value.trim();

            if (!title) { await Dialog.alert({ icon: 'âš ï¸', title: 'ç¼ºå°‘ä¿¡æ¯', message: 'è¯·è¾“å…¥é¡¹ç›®åç§°' }); return; }
            if (!code) { await Dialog.alert({ icon: 'âš ï¸', title: 'ç¼ºå°‘å†…å®¹', message: 'è¯·å¯¼å…¥HTMLæ–‡ä»¶æˆ–ç²˜è´´HTMLä»£ç ' }); return; }

            const codeSize = new Blob([code]).size;
            if (codeSize > 100 * 1024) {
                await Dialog.alert({ icon: 'âš ï¸', title: 'å†…å®¹è¿‡å¤§', message: `HTMLå†…å®¹ ${(codeSize/1024).toFixed(1)}KB è¶…è¿‡é™åˆ¶ï¼ˆ100KBï¼‰` });
                return;
            }

            if (!code.includes('<html') && !code.includes('<body') && !code.includes('<div')) {
                const confirmed = await Dialog.confirm({
                    icon: 'ğŸ¤”', title: 'HTMLæ ¼å¼æ£€æŸ¥',
                    message: 'ä»£ç ä¼¼ä¹ä¸æ˜¯å®Œæ•´çš„HTMLï¼Œç¡®å®šè¦ç»§ç»­ä¿å­˜å—ï¼Ÿ',
                    confirmText: 'ç»§ç»­ä¿å­˜', cancelText: 'è¿”å›ä¿®æ”¹'
                });
                if (!confirmed) return;
            }

            const project = { title, desc: desc || 'ç”¨æˆ·è‡ªå®šä¹‰é¡¹ç›®', icon, color: '#ffd700', tags: ['è‡ªå®šä¹‰'], htmlContent: code };
            await addUserProject(project);

            document.getElementById('projectTitle').value = '';
            document.getElementById('projectDesc').value = '';
            document.getElementById('projectIcon').value = '';
            htmlCode.value = '';
            fileLabel.textContent = 'ğŸ“ ç‚¹å‡»é€‰æ‹©HTMLæ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„';
            modal.classList.remove('show');
            await Dialog.alert({ icon: 'ğŸ‰', title: 'æ·»åŠ æˆåŠŸ', message: `é¡¹ç›®ã€Œ${title}ã€å·²æˆåŠŸæ·»åŠ ï¼` });
        });

        // åˆå§‹åŒ–
        renderCategoryNav();
        renderProjects();

        // ========== ä¸»é¢˜åˆ‡æ¢ ==========
        const themeToggle = document.getElementById('themeToggle');
        let currentTheme = localStorage.getItem('theme') || 'dark';
        
        function applyTheme(theme) {
            if (theme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.textContent = 'â˜€ï¸';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeToggle.textContent = 'ğŸŒ™';
            }
            localStorage.setItem('theme', theme);
            currentTheme = theme;
        }
        
        applyTheme(currentTheme);
        
        themeToggle.addEventListener('click', () => {
            applyTheme(currentTheme === 'dark' ? 'light' : 'dark');
        });

        // ä¿®æ”¹é¡¹ç›®è·³è½¬ï¼Œä¼ é€’ä¸»é¢˜å‚æ•°
        document.getElementById('projectsContainer').addEventListener('click', (e) => {
            const card = e.target.closest('.project-card');
            if (!card || e.target.classList.contains('delete-btn')) return;
            
            const file = card.dataset.file;
            const isUser = card.dataset.user === 'true';
            
            if (isUser) {
                const project = getUserProjects().find(p => p.id == card.dataset.id);
                if (project?.htmlContent) {
                    const blob = new Blob([project.htmlContent], { type: 'text/html' });
                    window.open(URL.createObjectURL(blob), '_blank');
                }
            } else if (file) {
                window.location.href = file + '?theme=' + currentTheme;
            }
        });
    </script>
</body>
</html>