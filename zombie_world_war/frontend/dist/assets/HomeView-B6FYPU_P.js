import{d as L,g as j,r as p,h as x,i as C,j as o,o as l,k as v,l as s,t as u,u as w,n as G,w as S,v as y,F as z,m as Z,p as q}from"./vue-vendor-CeuWReVY.js";import{u as K,g as k}from"./game-DfiOVufx.js";import{u as P}from"./client-CIWp8brx.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"main-menu"},X={key:0,class:"user-info"},Y={class:"username"},ss={key:1,class:"menu-buttons"},es=["disabled"],ts=["disabled"],as={key:2,class:"settings-panel"},ns={class:"setting-item"},os={class:"slider-container"},ls={class:"slider-value"},is={class:"setting-item"},us={class:"slider-container"},rs={class:"slider-value"},ds={class:"setting-item"},cs={class:"slider-container"},vs={class:"slider-value"},ms={class:"setting-item"},ps={class:"slider-container"},bs={class:"slider-value"},fs={key:3,class:"load-panel"},_s={key:0,class:"error-message"},gs={key:1,class:"loading"},Ss={key:2,class:"no-saves"},ys={key:3,class:"saves-list"},ks={class:"save-info"},hs={class:"save-wave"},Vs={class:"save-score"},xs={class:"save-date"},Cs={class:"save-actions"},ws=["onClick"],Gs=["onClick"],Ls=L({__name:"MainMenu",setup(M){const c=j(),b=P(),i=K(),m=p(!1),f=p(!1),_=p(!1),d=p(null),a=p({mouseSensitivity:50,masterVolume:80,musicVolume:70,sfxVolume:90}),g=x(()=>i.saves.length>0),r=x(()=>b.isAuthenticated);C(async()=>{r.value&&await h()});async function h(){if(r.value){m.value=!0,d.value=null;try{const t=await k.listSaves();i.setSaves(t)}catch(t){d.value=t instanceof Error?t.message:"Failed to load saves"}finally{m.value=!1}}}function N(){i.clearGameState(),c.push("/game")}async function D(){if(!g.value)return;const t=i.saves[0];await V(t.id)}async function V(t){m.value=!0,d.value=null;try{const e=await k.loadGame(t);i.setGameState(e),i.setCurrentSaveId(t),c.push("/game")}catch(e){d.value=e instanceof Error?e.message:"Failed to load game"}finally{m.value=!1}}async function E(t){try{await k.deleteSave(t),i.removeSave(t)}catch(e){d.value=e instanceof Error?e.message:"Failed to delete save"}}function F(){c.push("/settings")}function T(){f.value=!1}function U(){localStorage.setItem("gameSettings",JSON.stringify(a.value)),f.value=!1}function $(){const t=localStorage.getItem("gameSettings");if(t)try{const e=JSON.parse(t);a.value={...a.value,...e}}catch{}}function B(){_.value=!0,h()}function I(){_.value=!1}function R(){c.push("/auth")}function H(){c.push("/leaderboard")}function J(){b.clearAuth(),i.clearAll()}function O(t){const e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}return C(()=>{$()}),(t,e)=>(l(),o("div",Q,[r.value?(l(),o("div",X,[s("span",Y,"æ¬¢è¿Ž, "+u(w(b).currentUser?.username),1),s("button",{class:"logout-btn",onClick:J},"é€€å‡ºç™»å½•")])):v("",!0),e[16]||(e[16]=s("h1",{class:"title"},"Zombie World War",-1)),e[17]||(e[17]=s("p",{class:"subtitle"},"ä¸§å°¸ä¸–ç•Œå¤§æˆ˜",-1)),!f.value&&!_.value?(l(),o("div",ss,[s("button",{class:"menu-btn primary",onClick:N},[...e[4]||(e[4]=[s("span",{class:"btn-icon"},"ðŸŽ®",-1),s("span",{class:"btn-text"},"å¼€å§‹æ¸¸æˆ",-1)])]),s("button",{class:G(["menu-btn",{disabled:!g.value||!r.value}]),onClick:D,disabled:!g.value||!r.value},[...e[5]||(e[5]=[s("span",{class:"btn-icon"},"â–¶ï¸",-1),s("span",{class:"btn-text"},"ç»§ç»­æ¸¸æˆ",-1)])],10,es),s("button",{class:G(["menu-btn",{disabled:!r.value}]),onClick:B,disabled:!r.value},[...e[6]||(e[6]=[s("span",{class:"btn-icon"},"ðŸ“‚",-1),s("span",{class:"btn-text"},"åŠ è½½å­˜æ¡£",-1)])],10,ts),s("button",{class:"menu-btn",onClick:H},[...e[7]||(e[7]=[s("span",{class:"btn-icon"},"ðŸ†",-1),s("span",{class:"btn-text"},"æŽ’è¡Œæ¦œ",-1)])]),s("button",{class:"menu-btn",onClick:F},[...e[8]||(e[8]=[s("span",{class:"btn-icon"},"âš™ï¸",-1),s("span",{class:"btn-text"},"è®¾ç½®",-1)])]),r.value?v("",!0):(l(),o("button",{key:0,class:"menu-btn auth-btn",onClick:R},[...e[9]||(e[9]=[s("span",{class:"btn-icon"},"ðŸ‘¤",-1),s("span",{class:"btn-text"},"ç™»å½• / æ³¨å†Œ",-1)])]))])):v("",!0),f.value?(l(),o("div",as,[e[14]||(e[14]=s("h2",{class:"panel-title"},"æ¸¸æˆè®¾ç½®",-1)),s("div",ns,[e[10]||(e[10]=s("label",null,"é¼ æ ‡çµæ•åº¦",-1)),s("div",os,[S(s("input",{type:"range","onUpdate:modelValue":e[0]||(e[0]=n=>a.value.mouseSensitivity=n),min:"1",max:"100",class:"slider"},null,512),[[y,a.value.mouseSensitivity,void 0,{number:!0}]]),s("span",ls,u(a.value.mouseSensitivity),1)])]),s("div",is,[e[11]||(e[11]=s("label",null,"ä¸»éŸ³é‡",-1)),s("div",us,[S(s("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=n=>a.value.masterVolume=n),min:"0",max:"100",class:"slider"},null,512),[[y,a.value.masterVolume,void 0,{number:!0}]]),s("span",rs,u(a.value.masterVolume)+"%",1)])]),s("div",ds,[e[12]||(e[12]=s("label",null,"éŸ³ä¹éŸ³é‡",-1)),s("div",cs,[S(s("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=n=>a.value.musicVolume=n),min:"0",max:"100",class:"slider"},null,512),[[y,a.value.musicVolume,void 0,{number:!0}]]),s("span",vs,u(a.value.musicVolume)+"%",1)])]),s("div",ms,[e[13]||(e[13]=s("label",null,"éŸ³æ•ˆéŸ³é‡",-1)),s("div",ps,[S(s("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=n=>a.value.sfxVolume=n),min:"0",max:"100",class:"slider"},null,512),[[y,a.value.sfxVolume,void 0,{number:!0}]]),s("span",bs,u(a.value.sfxVolume)+"%",1)])]),s("div",{class:"panel-buttons"},[s("button",{class:"menu-btn",onClick:U},"ä¿å­˜"),s("button",{class:"menu-btn secondary",onClick:T},"è¿”å›ž")])])):v("",!0),_.value?(l(),o("div",fs,[e[15]||(e[15]=s("h2",{class:"panel-title"},"åŠ è½½å­˜æ¡£",-1)),d.value?(l(),o("div",_s,u(d.value),1)):v("",!0),m.value?(l(),o("div",gs," åŠ è½½ä¸­... ")):g.value?(l(),o("div",ys,[(l(!0),o(z,null,Z(w(i).saves,n=>(l(),o("div",{key:n.id,class:"save-item"},[s("div",ks,[s("div",hs,"æ³¢æ¬¡ "+u(n.waveReached),1),s("div",Vs,"åˆ†æ•°: "+u(n.score.toLocaleString()),1),s("div",xs,u(O(n.savedAt)),1)]),s("div",Cs,[s("button",{class:"action-btn load",onClick:W=>V(n.id)},"åŠ è½½",8,ws),s("button",{class:"action-btn delete",onClick:W=>E(n.id)},"åˆ é™¤",8,Gs)])]))),128))])):(l(),o("div",Ss," æš‚æ— å­˜æ¡£ ")),s("div",{class:"panel-buttons"},[s("button",{class:"menu-btn secondary",onClick:I},"è¿”å›ž")])])):v("",!0)]))}}),As=A(Ls,[["__scopeId","data-v-dacb2aff"]]),Ms={class:"home"},Ns=L({__name:"HomeView",setup(M){return(c,b)=>(l(),o("div",Ms,[q(As)]))}}),Us=A(Ns,[["__scopeId","data-v-d3a6e1e3"]]);export{Us as default};
//# sourceMappingURL=HomeView-B6FYPU_P.js.map
